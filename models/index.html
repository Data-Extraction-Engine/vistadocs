
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.10">
    
    
      
        <title>structure - Vista Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#models" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Vista Docs" class="md-header__button md-logo" aria-label="Vista Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Vista Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              structure
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Vista Docs" class="md-nav__button md-logo" aria-label="Vista Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Vista Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Folder structure
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Functions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Functions" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Functions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../function/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../function/admin/" class="md-nav__link">
        admin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../function/partner/" class="md-nav__link">
        partners
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Controller
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Controller" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Controller
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../controller/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../controller/admin/" class="md-nav__link">
        Admin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../controller/api/" class="md-nav__link">
        API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../controller/partner/" class="md-nav__link">
        Partner
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Route
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Route" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Route
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../route/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Models" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          structure
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        structure
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    Models
  </a>
  
    <nav class="md-nav" aria-label="Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#folder-structure" class="md-nav__link">
    Folder structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#address" class="md-nav__link">
    Address
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#admin" class="md-nav__link">
    Admin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#answer" class="md-nav__link">
    Answer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applicationrecord" class="md-nav__link">
    ApplicationRecord
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#articlecontentcategory" class="md-nav__link">
    ArticleContentCategory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#article" class="md-nav__link">
    Article
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authenticationtoken" class="md-nav__link">
    AuthenticationToken
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchcategorisation" class="md-nav__link">
    BranchCategorisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchmanager" class="md-nav__link">
    BranchManager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branch" class="md-nav__link">
    Branch
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#businessunit" class="md-nav__link">
    BusinessUnit
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#categoryupdate" class="md-nav__link">
    CategoryUpdate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#category" class="md-nav__link">
    Category
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checkin" class="md-nav__link">
    CheckIn
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#city" class="md-nav__link">
    City
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contentcategory" class="md-nav__link">
    ContentCategory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataimport" class="md-nav__link">
    DataImport
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#device" class="md-nav__link">
    Device
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feed" class="md-nav__link">
    Feed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ignore" class="md-nav__link">
    Ignore
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interaction" class="md-nav__link">
    Interaction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memberrequestmessage" class="md-nav__link">
    MemberRequestMessage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memberrequesttypeassignment" class="md-nav__link">
    MemberRequestTypeAssignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memberrequesttype" class="md-nav__link">
    MemberRequestType
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memberrequest" class="md-nav__link">
    MemberRequest
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notification" class="md-nav__link">
    Notification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#organisation" class="md-nav__link">
    Organisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnercategory" class="md-nav__link">
    PartnerCategory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#personality" class="md-nav__link">
    Personality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#photo" class="md-nav__link">
    Photo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preferencegroup" class="md-nav__link">
    PreferenceGroup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#profilerequest" class="md-nav__link">
    ProfileRequest
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question" class="md-nav__link">
    Question
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rating" class="md-nav__link">
    Rating
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#release" class="md-nav__link">
    Release
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#roleassignment" class="md-nav__link">
    RoleAssignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rolepreferencegroupassignment" class="md-nav__link">
    RolePreferenceGroupAssignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#role" class="md-nav__link">
    Role
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#share" class="md-nav__link">
    Share
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffassignment" class="md-nav__link">
    StaffAssignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topquestion" class="md-nav__link">
    TopQuestion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useranswer" class="md-nav__link">
    UserAnswer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#videocontentcategory" class="md-nav__link">
    VideoContentCategory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#video" class="md-nav__link">
    Video
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vistaadmin" class="md-nav__link">
    VistaAdmin
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="concern/" class="md-nav__link">
        concerns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="personality/" class="md-nav__link">
        personality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="version/" class="md-nav__link">
        version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Graphql
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Graphql" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Graphql
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphql/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphql/resolver/" class="md-nav__link">
        resolver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../graphql/type/" class="md-nav__link">
        type
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#models" class="md-nav__link">
    Models
  </a>
  
    <nav class="md-nav" aria-label="Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#folder-structure" class="md-nav__link">
    Folder structure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#address" class="md-nav__link">
    Address
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#admin" class="md-nav__link">
    Admin
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#answer" class="md-nav__link">
    Answer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applicationrecord" class="md-nav__link">
    ApplicationRecord
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#articlecontentcategory" class="md-nav__link">
    ArticleContentCategory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#article" class="md-nav__link">
    Article
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authenticationtoken" class="md-nav__link">
    AuthenticationToken
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchcategorisation" class="md-nav__link">
    BranchCategorisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchmanager" class="md-nav__link">
    BranchManager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branch" class="md-nav__link">
    Branch
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#businessunit" class="md-nav__link">
    BusinessUnit
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#categoryupdate" class="md-nav__link">
    CategoryUpdate
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#category" class="md-nav__link">
    Category
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#checkin" class="md-nav__link">
    CheckIn
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#city" class="md-nav__link">
    City
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contentcategory" class="md-nav__link">
    ContentCategory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataimport" class="md-nav__link">
    DataImport
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#device" class="md-nav__link">
    Device
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#feed" class="md-nav__link">
    Feed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ignore" class="md-nav__link">
    Ignore
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interaction" class="md-nav__link">
    Interaction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memberrequestmessage" class="md-nav__link">
    MemberRequestMessage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memberrequesttypeassignment" class="md-nav__link">
    MemberRequestTypeAssignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memberrequesttype" class="md-nav__link">
    MemberRequestType
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memberrequest" class="md-nav__link">
    MemberRequest
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notification" class="md-nav__link">
    Notification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#organisation" class="md-nav__link">
    Organisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnercategory" class="md-nav__link">
    PartnerCategory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#personality" class="md-nav__link">
    Personality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#photo" class="md-nav__link">
    Photo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preferencegroup" class="md-nav__link">
    PreferenceGroup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#profilerequest" class="md-nav__link">
    ProfileRequest
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#question" class="md-nav__link">
    Question
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rating" class="md-nav__link">
    Rating
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#release" class="md-nav__link">
    Release
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#roleassignment" class="md-nav__link">
    RoleAssignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rolepreferencegroupassignment" class="md-nav__link">
    RolePreferenceGroupAssignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#role" class="md-nav__link">
    Role
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#share" class="md-nav__link">
    Share
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffassignment" class="md-nav__link">
    StaffAssignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#topquestion" class="md-nav__link">
    TopQuestion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#useranswer" class="md-nav__link">
    UserAnswer
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#videocontentcategory" class="md-nav__link">
    VideoContentCategory
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#video" class="md-nav__link">
    Video
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vistaadmin" class="md-nav__link">
    VistaAdmin
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h2 id="models">Models</h2>
<h3 id="folder-structure">Folder structure</h3>
<pre><code>    ├───models
        ├───concerns
        ├───personality
        └───versions
</code></pre>
<h1 id="address"><strong>Address</strong></h1>
<p>The Address model represents an address in the system. It has the following attributes:</p>
<p><strong>id</strong> (integer): a unique ID for the address</p>
<p><strong>label</strong> (string): a label or nickname for the address</p>
<p><strong>line1</strong> (string): the first line of the address</p>
<p><strong>line2</strong> (string): the second line of the address</p>
<p><strong>town</strong> (string): the town or city where the address is located</p>
<p><strong>county</strong> (string): the county or region where the address is located</p>
<p><strong>postcode</strong> (string): the postal code for the address</p>
<p><strong>country</strong> (string): the country where the address is located</p>
<p><strong>phone</strong> (string): a phone number associated with the address</p>
<p><strong>latitude</strong> (decimal): the latitude of the address</p>
<p><strong>longitude</strong> (decimal): the longitude of the address</p>
<p><strong>addressable_type</strong> (string): the type of model that the address belongs to** (e.g. "User" or "Company")</p>
<p><strong>addressable_id</strong> (integer): the ID of the model that the address belongs to</p>
<p><strong>created_at</strong> (datetime): the date and time that the address was created</p>
<p><strong>updated_at</strong> (datetime): the date and time that the address was last updated</p>
<p><strong>city_id</strong> (integer): the ID of the city where the address is located</p>
<p>The Address model has the following relationships:</p>
<pre><code>belongs_to :addressable, polymorphic: true: this indicates that the address belongs to a parent model, and the addressable_type and addressable_id attributes are used to specify which model the address belongs to. The polymorphic option indicates that the parent model can be any type of model, and the inverse_of: :address option specifies the name of the has_one or has_many association on the parent model.
belongs_to :city: this indicates that the address belongs to a city. The city_id attribute is used to specify which city the address belongs to.
</code></pre>
<p>The Address model has the following custom methods:</p>
<pre><code>country_name: this method returns the name of the country for the address. It uses the ISO3166 gem to look up the name of the country based on the country attribute.
country_code: this method returns the country code for the address. It simply returns the value of the country attribute.
</code></pre>
<p>Here are some examples of how the Address model might be used:
    # Find all addresses for a user
    user = User.find(123)
    addresses = user.addresses</p>
<pre><code># Find the nearest address to a given location
latitude = 37.774929
longitude = -122.419416
radius = 5 # miles
addresses = Address.within(radius, origin: [latitude, longitude])

# Find the address for a specific user
user = User.find(123)
address = user.address

# Set the address for a user
user = User.find(123)
</code></pre>
<h1 id="admin"><strong>Admin</strong></h1>
<p>The following are the Attributes of Admin:</p>
<p><strong>id</strong>: bigint, primary key for the model</p>
<p><strong>email</strong>: string, the email address of the admin</p>
<p><strong>first_name</strong>: string, the first name of the admin</p>
<p><strong>last_name</strong>: string, the last name of the admin</p>
<p><strong>mobile_number</strong>: string, the mobile phone number of the admin</p>
<p><strong>encrypted_password</strong>: string, a hashed version of the admin's password</p>
<p><strong>reset_password_token</strong>: string, a token used for resetting the admin's password</p>
<p><strong>reset_password_sent_at</strong>: datetime, the time at which the reset password token was sent</p>
<p><strong>remember_created_at</strong>: datetime, the time at which the admin selected the "remember me" option during login</p>
<p><strong>sign_in_count</strong>: integer, the number of times the admin has signed in</p>
<p><strong>current_sign_in_at</strong>: datetime, the time at which the admin signed in during the current session</p>
<p><strong>last_sign_in_at</strong>: datetime, the time at which the admin signed in during the previous session</p>
<p><strong>current_sign_in_ip</strong>: inet, the IP address of the admin during the current session</p>
<p><strong>last_sign_in_ip</strong>: inet, the IP address of the admin during the previous session</p>
<p><strong>authentication_token</strong>: string, a token used for authenticating the admin</p>
<p><strong>created_at</strong>: datetime, the time at which the admin's record was created</p>
<p><strong>updated_at</strong>: datetime, the time at which the admin's record was last updated</p>
<p><strong>organisation_id</strong>: bigint, the ID of the organization to which the admin belongs</p>
<p><strong>type</strong>: string, the type of staff member (in this case, "Admin")</p>
<p><strong>employee_id</strong>: string, the employee ID of the admin</p>
<p><strong>confirmation_token</strong>: string, a token used for confirming the admin's email address</p>
<p><strong>confirmed_at</strong>: datetime, the time at which the admin's email address was confirmed</p>
<p><strong>confirmation_sent_at</strong>: datetime, the time at which the confirmation token was sent</p>
<p><strong>suspended_at</strong>: datetime, the time at which the admin's access was suspended</p>
<p><strong>archived_at</strong>: datetime, the time at which the admin's record was archived</p>
<p><strong>encrypted_pin</strong>: string, a hashed version of the admin's PIN (personal identification number)</p>
<p><strong>unconfirmed_email</strong>: string, the unconfirmed email address of the admin (if the admin has requested a change to their email address)</p>
<p>Inherits from <a href="./#staffmember">StaffMember</a> model</p>
<p>Custom methods: None</p>
<p>Examples of usage:</p>
<pre><code>An instance of the Admin model could represent a staff member with administrative privileges within an organization.
The email, password, and authentication token attributes could be used for authenticating the admin when logging in to the system.
The sign_in_count, current_sign_in_at, and last_sign_in_at attributes could be used for tracking the admin's login history.
</code></pre>
<h1 id="answer"><strong>Answer</strong></h1>
<p>Attributes:</p>
<p><strong>id</strong>(integer): The primary key for the model.</p>
<p><strong>question_id</strong>(integer): The ID of the question that the answer belongs to.</p>
<p><strong>title</strong>(text): The title of the answer.</p>
<p><strong>description</strong>(text): A description of the answer.</p>
<p><strong>created_at</strong>(datetime): The timestamp for when the answer was created.</p>
<p><strong>updated_at</strong>(datetime): The timestamp for when the answer was last updated.</p>
<p><strong>position</strong>(integer): The position of the answer within its parent question.</p>
<p>Relationships:</p>
<p><strong>question</strong>(belongs_to): The question that the answer belongs to.</p>
<p><strong>photo</strong>(has_one): The photo associated with the answer.</p>
<p>Custom methods:</p>
<p><strong>siblings</strong>: Returns the other answers within the same question as the current answer.</p>
<p><strong>reject_photo?</strong>: Determines whether a photo should be rejected when creating or updating an answer.</p>
<p><strong>set_position</strong>: Sets the position of the answer within its parent question.</p>
<p>Examples of usage:</p>
<pre><code># Create a new answer with a title and description
answer = Answer.new(title: 'Yes', description: 'The answer is yes')

# Set the question that the answer belongs to
answer.question = Question.first

# Save the answer
answer.save

# Update the title of the answer
answer.title = 'Yes, definitely'
answer.save

# Delete the answer
answer.destroy
</code></pre>
<h1 id="applicationrecord"><strong>ApplicationRecord</strong></h1>
<p>Attributes:</p>
<p>None. ApplicationRecord is an abstract base class and does not have any attributes of its own.</p>
<p>Relationships:</p>
<p>None. ApplicationRecord is an abstract base class and does not have any relationships of its own.
Custom methods:</p>
<p>updated_since(datetime): Returns all records that have been updated since the specified datetime.
pluck_to_hash(*keys): Returns an array of hashes, where each hash represents a record in the database with keys corresponding to the specified attributes.</p>
<p>Examples of usage:</p>
<pre><code># Find all records in the database that have been updated since yesterday
ApplicationRecord.updated_since(1.day.ago)

# Retrieve the IDs and titles of all records in the database
ApplicationRecord.pluck_to_hash(:id, :title)
Note: ApplicationRecord is an abstract base class and cannot be instantiated directly. Instead, you will need to use a concrete subclass of ApplicationRecord (such as Answer, Question, etc.) to create and manipulate records in the database.
</code></pre>
<h1 id="articlecontentcategory"><strong>ArticleContentCategory</strong></h1>
<p>Attributes:</p>
<p><strong>id</strong>(integer): The primary key for the model.</p>
<p><strong>article_id</strong>(integer): The ID of the article that the content category belongs to.</p>
<p><strong>content_category_id</strong>(integer): The ID of the content category.</p>
<p><strong>created_at</strong>(datetime): The timestamp for when the article content category was created.</p>
<p><strong>updated_at</strong>(datetime): The timestamp for when the article content category was last updated.</p>
<p>Relationships:</p>
<p><strong>article</strong>(belongs_to): The article that the content category belongs to.</p>
<p><strong>content_category</strong>(belongs_to): The content category.
Custom methods:</p>
<p>None.
Examples of usage:</p>
<pre><code># Create a new article content category
article_content_category = ArticleContentCategory.new

# Set the article and content category that the article content category belongs to
article_content_category.article = Article.first
article_content_category.content_category = ContentCategory.first

# Save the article content category
article_content_category.save

# Delete the article content category
article_content_category.destroy
</code></pre>
<h1 id="article"><strong>Article</strong></h1>
<p>Attributes:</p>
<p><strong>id</strong>(integer): The primary key for the model.</p>
<p><strong>title</strong>(string): The title of the article.</p>
<p><strong>content</strong>(text): The content of the article.</p>
<p><strong>publish_at</strong>(datetime): The timestamp for when the article should be published.</p>
<p><strong>created_at</strong>(datetime): The timestamp for when the article was created.</p>
<p><strong>updated_at</strong>(datetime): The timestamp for when the article was last updated.</p>
<p><strong>notification_job_id</strong>(integer): The ID of the job used to send notifications when the article is published.</p>
<p>Relationships:</p>
<p><strong>header_image</strong>(has_one): The header image for the article.</p>
<p><strong>photos</strong>(has_many): The photos associated with the article.</p>
<p><strong>article_content_categories</strong>(has_many): The article content categories associated with the article.</p>
<p><strong>content_categories</strong>(has_many): The content categories associated with the article.</p>
<p>Custom methods:</p>
<p><strong>header_image=(header_image)</strong>: Sets the header image for the article.</p>
<p><strong>publish_at=(publish_at)</strong>: Sets the publish timestamp for the article.</p>
<p><strong>published?</strong>: Returns true if the article has been published, false otherwise.</p>
<p><strong>status</strong>: Returns the current status of the article.</p>
<p><strong>self.start_draft</strong>: Creates a new draft article.</p>
<p>Examples of usage:</p>
<pre><code># Create a new article
article = Article.new

# Set the title and content of the article
article.title = 'My article'
article.content = 'This is the content of my article'

# Set the publish timestamp for the article
article.publish_at = 1.day.from_now

# Save the article
article.save

# Check if the article has been published
article.published?

# Get the status of the article
article.status

# Delete the article
article.destroy
</code></pre>
<h1 id="authenticationtoken"><strong>AuthenticationToken</strong></h1>
<p>The AuthenticationToken model represents a token that is used to authenticate a user. It belongs to a polymorphic user, which means that it can belong to any model that includes the User module.</p>
<p>Attributes:</p>
<p><strong>id</strong>: a unique identifier for the token (integer, primary key)</p>
<p><strong>context</strong>: the context in which the token is used (string)</p>
<p><strong>body</strong>: the actual token (string)</p>
<p><strong>user_type</strong>: the type of the user that the token belongs to (string)</p>
<p><strong>user_id</strong>: the ID of the user that the token belongs to (integer)</p>
<p><strong>last_used_at</strong>: the last time the token was used (datetime)</p>
<p><strong>ip_address</strong>: the IP address from which the token was last used (inet)</p>
<p><strong>user_agent</strong>: the user agent string from the device that used the token last (string)</p>
<p><strong>created_at</strong>: the time the token was created (datetime)</p>
<p><strong>updated_at</strong>: the time the token was last updated (datetime)</p>
<p>Relationships:</p>
<p><strong>user</strong>: the user that the token belongs to (polymorphic association)</p>
<p>Custom methods:</p>
<p><strong>decode</strong>: decodes a token from the headers</p>
<p><strong>find_for_context</strong>: finds a token for a given context and token body</p>
<p><strong>create_and_return_staff_token</strong>: creates a new staff token and returns it</p>
<p><strong>create_and_return_manager_token</strong>: creates a new manager token and returns it</p>
<p><strong>create_and_return_token</strong>: creates a new token for a given context and returns it</p>
<p><strong>create_and_return_analytics_token</strong>: creates and returns an analytics token</p>
<p>Examples of usage:</p>
<pre><code>To create a new staff token for a user:


token = AuthenticationToken.create_and_return_staff_token(current_user, request)
To find a token for a given context and token body:


token = AuthenticationToken.find_for
</code></pre>
<h1 id="branchcategorisation"><strong>BranchCategorisation</strong></h1>
<p>The BranchCategorisation model represents the many-to-many relationship between branches and partner categories. This allows a branch to be associated with one or more partner categories, and a partner category to be associated with one or more branches.</p>
<p>Attributes:</p>
<p><strong>id</strong>: A unique identifier for the branch categorisation record, stored as an integer and generated automatically by the database.</p>
<p><strong>branch_id</strong>: The ID of the branch that is associated with a partner category, stored as an integer.</p>
<p><strong>partner_category_id</strong>: The ID of the partner category that is associated with a branch, stored as an integer.</p>
<p><strong>created_at</strong>: A timestamp indicating when the branch categorisation record was created, stored as a datetime.</p>
<p><strong>updated_at</strong>: A timestamp indicating when the branch categorisation record was last updated, stored as a datetime.</p>
<p>Relationships:</p>
<p><strong>belongs_to</strong>: A branch categorisation belongs to a single branch and a single partner category.</p>
<p><strong>branch</strong>: This relationship specifies the branch that is associated with a partner category.</p>
<p><strong>partner_category</strong>: This relationship specifies the partner category that is associated with a branch.</p>
<p>Custom methods:</p>
<p>There are no custom methods defined for the BranchCategorisation model.</p>
<p>Examples of usage:</p>
<p>Creating a new branch categorisation:</p>
<pre><code>branch = Branch.first
partner_category = PartnerCategory.first
branch_categorisation = BranchCategorisation.new(branch: branch, partner_category: partner_category)
branch_categorisation.save
</code></pre>
<p>Retrieving all branch categorisations for a particular branch:</p>
<pre><code>branch = Branch.first
branch_categorisations = branch.branch_categorisations
</code></pre>
<p>Retrieving all branches that belong to a particular partner category:</p>
<pre><code>partner_category = PartnerCategory.first
branches = partner_category.branches
</code></pre>
<p>Removing a branch categorisation:</p>
<pre><code>branch_categorisation = BranchCategorisation.first
branch_categorisation.destroy
</code></pre>
<h1 id="branchmanager"><strong>BranchManager</strong></h1>
<p>The BranchManager model is a subclass of the StaffMember model and represents a staff member who is a branch manager at an organisation.</p>
<p>attributes:</p>
<p><strong>id</strong>: a bigint that serves as the primary key for the model</p>
<p><strong>email</strong>: a string that stores the email address of the staff member</p>
<p><strong>first_name</strong>: a string that stores the first name of the staff member</p>
<p><strong>last_name</strong>: a string that stores the last name of the staff member</p>
<p><strong>mobile_number</strong>: a string that stores the mobile phone number of the staff member</p>
<p><strong>encrypted_password</strong>: a string that stores the encrypted password of the staff member</p>
<p><strong>reset_password_token</strong>: a string that stores a token used to reset the staff member's password</p>
<p><strong>reset_password_sent_at</strong>: a datetime that stores the time at which the reset password token was sent to the staff member</p>
<p><strong>remember_created_at</strong>: a datetime that stores the time at which the staff member requested to be remembered on the device they are using</p>
<p><strong>sign_in_count</strong>: an integer that stores the number of times the staff member has signed in</p>
<p><strong>current_sign_in_at</strong>: a datetime that stores the time at which the staff member last signed in</p>
<p><strong>last_sign_in_at</strong>: a datetime that stores the time at which the staff member signed in before the last time they signed in</p>
<p><strong>current_sign_in_ip</strong>: an inet data type that stores the IP address the staff member is currently signed in from</p>
<p><strong>last_sign_in_ip</strong>: an inet data type that stores the IP address the staff member last signed in from</p>
<p><strong>authentication_token</strong>: a string that stores a unique token used for authentication purposes</p>
<p><strong>created_at</strong>: a datetime that stores the time at which the staff</p>
<p>Relationships:</p>
<p>BranchManager has a one-to-many relationship with Branch through the branches association.</p>
<p>Custom methods:</p>
<p>assigned_branches: returns a collection of branches that the branch manager is assigned to.</p>
<p>Examples of usage:</p>
<pre><code># Find a branch manager by their email and assign them to a branch
manager = BranchManager.find_by(email: 'branch_manager@example.com')
branch = Branch.find(1)
manager.branches &lt;&lt; branch

# Find all the branches that a branch manager is assigned to
manager = BranchManager.find(1)
manager.assigned_branches
</code></pre>
<h1 id="branch"><strong>Branch</strong></h1>
<p>Attributes:</p>
<p><strong>id</strong>: integer, primary key</p>
<p><strong>business_unit_id</strong>: integer</p>
<p><strong>name</strong>: string</p>
<p><strong>created_at</strong>: datetime</p>
<p><strong>updated_at</strong>: datetime</p>
<p><strong>email</strong>: string</p>
<p><strong>telephone</strong>: string</p>
<p><strong>archived_at</strong>: datetime</p>
<p><strong>image</strong>: string</p>
<p><strong>branch_info</strong>: string</p>
<p><strong>booking_url</strong>: string</p>
<p><strong>vista_partner</strong>: boolean, default: false</p>
<p><strong>ratings_count</strong>: integer, default: 0</p>
<p>Relationships:</p>
<p><strong>business_unit</strong>: belongs to a BusinessUnit</p>
<p><strong>organisation</strong>: has one Organisation through the BusinessUnit</p>
<p><strong>photo</strong>: has one Photo as owner</p>
<p><strong>address</strong>: has one Address as addressable</p>
<p><strong>staff_assignments</strong>: has many StaffAssignments as target</p>
<p><strong>staff_members</strong>: has many StaffMembers through StaffAssignments</p>
<p><strong>shares</strong>: has many Shares</p>
<p><strong>users</strong>: has many Users through Shares with the condition that the Share is authorised</p>
<p><strong>branch_categorisations</strong>: has many BranchCategorisations</p>
<p><strong>categories</strong>: has many PartnerCategories through BranchCategorisations</p>
<p><strong>interactions</strong>: has many Interactions</p>
<p><strong>roles</strong>: has many Roles through the BusinessUnit</p>
<p><strong>check_ins</strong>: has many CheckIns</p>
<p><strong>member_requests</strong>: has many MemberRequests</p>
<p><strong>member_request_messages</strong>: has many MemberRequestMessages as messageable</p>
<p>Custom methods:</p>
<p><strong>category_titles</strong>: returns an array of the titles of the categories associated with the branch</p>
<p><strong>destroy_staff</strong>: destroys the staff members associated with the branch</p>
<h1 id="businessunit"><strong>BusinessUnit</strong></h1>
<p>Attributes:</p>
<p><strong>id</strong>: integer, primary key</p>
<p><strong>name</strong>: string</p>
<p><strong>organisation_id</strong>: integer, foreign key to the organisations table</p>
<p><strong>created_at</strong>: datetime</p>
<p><strong>updated_at</strong>: datetime</p>
<p><strong>archived_at</strong>: datetime</p>
<p>Relationships:</p>
<p><strong>belongs_to</strong>:organisation</p>
<p><strong>has_many</strong>:branches</p>
<p><strong>has_many</strong>:roles</p>
<p><strong>has_many</strong>:member_request_types</p>
<p>Custom methods:</p>
<p>None</p>
<p>Examples of usage:</p>
<p>Fetch all business units belonging to a particular organisation:</p>
<pre><code>organisation = Organisation.find(1)
business_units = organisation.business_units
</code></pre>
<p>Fetch all branches belonging to a particular business unit:</p>
<pre><code>business_unit = BusinessUnit.find(1)
branches = business_unit.branches
</code></pre>
<p>Fetch all roles belonging to a particular business unit:</p>
<pre><code>business_unit = BusinessUnit.find(1)
roles = business_unit.roles
</code></pre>
<p>Fetch all member request types belonging to a particular business unit:</p>
<pre><code>business_unit = BusinessUnit.find(1)
member_request_types = business_unit.member_request_types
</code></pre>
<h1 id="categoryupdate"><strong>CategoryUpdate</strong></h1>
<p>Attributes:</p>
<p><strong>id</strong>: integer</p>
<p><strong>category_id</strong>: integer</p>
<p><strong>question_ids</strong>: array of integers</p>
<p><strong>created_at</strong>: datetime</p>
<p><strong>updated_at</strong>: datetime</p>
<p>Relationships:</p>
<p><strong>belongs_to</strong>:category</p>
<p><strong>Custom methods</strong>:</p>
<p><strong>title</strong>: returns the title of the associated category</p>
<p><strong>photo</strong>: returns the photo of the associated category</p>
<p><strong>questions</strong>: returns an array of Question objects that have an id in the question_ids attribute</p>
<p>Examples of usage:</p>
<p>Find the category update with id 1</p>
<pre><code>update = CategoryUpdate.find(1)
</code></pre>
<p>Access the title of the associated category</p>
<pre><code>update.title
</code></pre>
<p>Access the photo of the associated category</p>
<pre><code>update.photo
</code></pre>
<p>Access the questions associated with this update</p>
<pre><code>update.questions
</code></pre>
<h1 id="category"><strong>Category</strong></h1>
<p>It has the following attributes:</p>
<p><strong>id</strong>: a unique identifier for the update, stored as a bigint</p>
<p><strong>category_id</strong>: a foreign key referencing the category that this update is for</p>
<p><strong>question_ids</strong>: an array of integers representing the question IDs that are associated with this update</p>
<p><strong>created_at</strong>: a timestamp for when the update was created</p>
<p><strong>updated_at</strong>: a timestamp for when the update was last updated</p>
<p>It has the following relationships:</p>
<p><strong>belongs_to :category</strong>: indicates that each category update belongs to a single category</p>
<p>It has the following custom methods:</p>
<p><strong>title</strong>: returns the title of the category that this update is for. If the category's title is "general" and it has a parent, the parent's title is returned instead.</p>
<p><strong>photo</strong>: returns the photo of the category that this update is for.
    questions: returns a collection of Question objects that are associated with this update.</p>
<p>Here is an example of how the CategoryUpdate model could be used:</p>
<p>Find a category update by its ID</p>
<pre><code>update = CategoryUpdate.find(1)
</code></pre>
<p>Access the title of the update's category</p>
<pre><code>puts update.title
</code></pre>
<p>Access the questions associated with the update</p>
<pre><code>questions = update.questions
</code></pre>
<h1 id="checkin"><strong>CheckIn</strong></h1>
<p>The CheckIn model represents a check-in by a user to a branch in the application. It has the following attributes:</p>
<p><strong>id</strong>: a unique identifier for the check-in, stored as a bigint</p>
<p><strong>user_id</strong>: a foreign key referencing the user who checked in</p>
<p><strong>branch_id</strong>: a foreign key referencing the branch that the user checked in to</p>
<p><strong>arrival_date</strong>: a date representing the date on which the user checked in</p>
<p><strong>arrival_time_start</strong>: a time representing the start time of the user's check-in</p>
<p><strong>arrival_time_end</strong>: a time representing the end time of the user's check-in</p>
<p><strong>created_at</strong>: a timestamp for when the check-in was created</p>
<p><strong>updated_at</strong>: a timestamp for when the check-in was last updated</p>
<p>It has the following relationships:</p>
<p><strong>belongs_to :user, touch: true</strong>: indicates that each check-in belongs to a single user, and the updated_at timestamp of the user will be updated whenever this check-in is saved.
belongs_to :branch: indicates that each check-in belongs to a single branch
It has the following custom methods:</p>
<p><strong>earliest</strong>: a scope that orders check-ins by their arrival_date in ascending order.
future: a scope that filters check-ins to only include those with an arrival_date in the future.
for_branch: a scope that filters check-ins to only include those for a particular branch.</p>
<p>Here is an example of how the CheckIn model could be used:</p>
<p>Find a user by their ID</p>
<pre><code>user = User.find(1)
</code></pre>
<p>Find a branch by its ID</p>
<pre><code>branch = Branch.find(1)
</code></pre>
<p>Create a new check-in for the user at the branch</p>
<pre><code>check_in = CheckIn.new(user: user, branch: branch, arrival_date: Date.today, arrival_time_start: Time.now)
</code></pre>
<p>Save the check-in</p>
<pre><code>check_in.save
</code></pre>
<p>Find all future check-ins for a particular branch</p>
<pre><code>future_check_ins = CheckIn.for_branch(branch).future
</code></pre>
<h1 id="city"><strong>City</strong></h1>
<p>The City model represents a city in the application. It has the following attributes:</p>
<p><strong>id</strong>: a unique identifier for the city, stored as a bigint</p>
<p><strong>name</strong>: the name of the city</p>
<p><strong>created_at</strong>: a timestamp for when the city was created</p>
<p><strong>updated_at</strong>: a timestamp for when the city was last updated</p>
<p><strong>status</strong>: a string representing the status of the city, with possible values of "enabled", "disabled", and "coming_soon"</p>
<p>It has the following relationships:</p>
<p><strong>HasPhoto</strong>: indicates that the City model includes the HasPhoto module, which provides it with the ability to have a photo associated with it.
It has the following custom methods:</p>
<p><strong>to_s</strong>: returns the name of the city as a string.</p>
<p>It also has the following scopes:</p>
<p><strong>default_scope</strong>: orders cities by their name in ascending order.</p>
<p><strong>not_disabled</strong>: filters cities to only include those with a status of "enabled" or "coming_soon".
Here is an example of how the City model could be used:</p>
<p>Find a city by its ID</p>
<pre><code>city = City.find(1)
</code></pre>
<p>Access the name of the city</p>
<pre><code>puts city.name
</code></pre>
<p>Update the status of the city</p>
<pre><code>city.status = "disabled"
city.save
</code></pre>
<p>Find all cities that are not disabled</p>
<pre><code>cities = City.not_disabled
</code></pre>
<h1 id="contentcategory"><strong>ContentCategory</strong></h1>
<p>The ContentCategory model represents a category for organizing content (e.g. articles, videos) in the application. It has the following attributes:</p>
<p><strong>id</strong>: a unique identifier for the content category, stored as a bigint</p>
<p><strong>name</strong>: the name of the content category</p>
<p><strong>created_at</strong>: a timestamp for when the content category was created</p>
<p><strong>updated_at</strong>: a timestamp for when the content category was last updated</p>
<p>It has the following relationships:</p>
<p><strong>has_many </strong>:article_content_categories, dependent: :destroy: indicates that each content category can have many associations with articles through the article_content_categories join table, and these associations will be destroyed if the content category is deleted.</p>
<p><strong>has_many :articles, through: :article_content_categories</strong>: indicates that a content category can have many articles associated with it through the article_content_categories join table.</p>
<p><strong>has_many :video_content_categories, dependent: :destroy</strong>: indicates that each content category can have many associations with videos through the video_content_categories join table, and these associations will be destroyed if the content category is deleted.</p>
<p><strong>has_many :videos, through: :video_content_categories</strong>: indicates that a content category can have many videos associated with it through the video_content_categories join table.</p>
<p>Here is an example of how the ContentCategory model could be used:</p>
<p>Find a content category by its ID</p>
<pre><code>category = ContentCategory.find(1)
</code></pre>
<p>Access the name of the category</p>
<pre><code>puts category.name
</code></pre>
<p>Find all articles in the category</p>
<pre><code>articles = category.articles
</code></pre>
<p>Find all videos in the category</p>
<pre><code>videos = category.videos
</code></pre>
<p>Create a new article and associate it with the category</p>
<pre><code>article = Article.new(title: "New Article")
article.content_categories &lt;&lt; category
article.save
</code></pre>
<h1 id="dataimport"><strong>DataImport</strong></h1>
<p>The DataImport model represents an import of data from a file (e.g. a spreadsheet) in the application. It has the following attributes:</p>
<p><strong>id</strong>: a unique identifier for the data import, stored as a bigint</p>
<p><strong>file</strong>: a string representing the file that was imported, stored as a file on the filesystem</p>
<p><strong>status</strong>: a string representing the status of the data import, with possible values of "new", "running", "finished", and "failed"</p>
<p><strong>log</strong>: a text field that stores log messages for the data import</p>
<p><strong>finished_at</strong>: a timestamp for when the data import finished</p>
<p><strong>created_at</strong>: a timestamp for when the data import was created</p>
<p><strong>updated_at</strong>: a timestamp for when the data import was last updated</p>
<p><strong>options</strong>: a JSONB field that stores options for the data import, including whether to import categories, questions, locking conditions, and visibility conditions</p>
<p>The DataImport model has the following relationships:</p>
<p><strong>mount_uploader :file, FileUploader</strong>: indicates that the file attribute is a file that is managed by the FileUploader uploader.</p>
<p>It has the following custom methods:</p>
<p><strong>filename</strong>: returns the filename of the imported file as a string.</p>
<p><strong>import_all</strong>: performs the data import, updating the status of the data import to "running" and setting it to "finished" or "failed" upon completion. This method also broadcasts the status of the data import to a channel on the Action Cable server.</p>
<p><strong>import_categories</strong>: imports categories from the data import file.</p>
<p><strong>import_questions</strong>: imports questions from the data import file.</p>
<p><strong>update_visibility_conditions</strong>: updates visibility conditions for questions in the data import file.</p>
<p><strong>update_locking_conditions</strong>: updates locking conditions for questions in the data import file.</p>
<p><strong>categories_spreadsheet</strong>: returns a Spreadsheet object for the categories sheet in the data import file.</p>
<p><strong>questions_spreadsheet</strong>: returns a Spreadsheet object for the questions sheet in the data import file.</p>
<p><strong>visibility_conditions_spreadsheet</strong>: returns a Spreadsheet object for the visibility conditions sheet in the data import file.</p>
<p><strong>locking_conditions_spreadsheet</strong>: returns a Spreadsheet object for the locking conditions sheet in the data import file.</p>
<p>Here is an example of how the DataImport model could be used:</p>
<p>Create a new data import with a file and options</p>
<pre><code>data_import = DataImport.new(file: params[:file], options: { categories: true, questions: true })
</code></pre>
<p>Save the data import and perform the import</p>
<pre><code>if data_import.save
    data_import.import_all
end
</code></pre>
<p>Find all data imports ordered by the most recently created</p>
<pre><code>data_imports = DataImport.all
</code></pre>
<h1 id="device"><strong>Device</strong></h1>
<p>The Device model represents a device that a user has used to sign in to the application. It has the following attributes:</p>
<p><strong>id</strong>: a unique identifier for the device, stored as a bigint</p>
<p><strong>user_id</strong>: a foreign key for the user associated with the device</p>
<p><strong>platform</strong>: a string representing the platform of the device (e.g. "ios" or "android")</p>
<p><strong>token</strong>: a string representing a unique token for the device</p>
<p><strong>created_at</strong>: a timestamp for when the device was created</p>
<p><strong>updated_at</strong>: a timestamp for when the device was last updated</p>
<p>It has the following relationships:</p>
<p><strong>belongs_to :user</strong>: indicates that each device belongs to a single user.
It has the following custom methods:</p>
<p><strong>ios?</strong>: returns true if the platform of the device is "ios", false otherwise.
android?: returns true if the platform of the device is "android", false otherwise.
Here is an example of how the Device model could be used:</p>
<p>Find a device by its token</p>
<pre><code>device = Device.find_by(token: params[:token])
</code></pre>
<p>Check if the device is an iOS device</p>
<pre><code>if device.ios?
# Do something
end
</code></pre>
<p>Create a new device for a user</p>
<pre><code>device = Device.new(user: current_user, platform: params[:platform], token: params[:token])
</code></pre>
<p>Save the device</p>
<pre><code>device.save
</code></pre>
<h1 id="feed"><strong>Feed</strong></h1>
<p>The Feed model is a serializable model that represents a feed of content for a user. It has the following attributes:</p>
<p><strong>articles</strong>: an array of articles to be included in the feed</p>
<p><strong>interactions</strong>: an array of interactions to be included in the feed</p>
<p><strong>category_updates</strong>: an array of category updates to be included in the feed</p>
<p><strong>videos</strong>: an array of videos to be included in the feed</p>
<p>It does not have any relationships or custom methods.</p>
<p>Here is an example of how the Feed model could be used:</p>
<p>Initialize a new feed with arrays of articles, interactions, category updates, and videos</p>
<pre><code>feed = Feed.new(articles: articles, interactions: interactions, category_updates: category_updates, videos: videos)
</code></pre>
<p>Render the feed as JSON using a serializer</p>
<pre><code>render json: feed
</code></pre>
<h1 id="ignore"><strong>Ignore</strong></h1>
<p>The Ignore model represents a relationship between a user and a category where the user has indicated that they do not want to receive notifications for updates to the category. It has the following attributes:</p>
<p><strong>id</strong>: a unique identifier for the ignore relationship, stored as a bigint</p>
<p><strong>user_id</strong>: a foreign key for the user associated with the ignore relationship</p>
<p><strong>category_id</strong>: a foreign key for the category associated with the ignore relationship</p>
<p><strong>created_at</strong>: a timestamp for when the ignore relationship was created</p>
<p><strong>updated_at</strong>: a timestamp for when the ignore relationship was last updated</p>
<p>It has the following relationships:</p>
<p><strong>belongs_to :user</strong>: indicates that each ignore relationship belongs to a single user.</p>
<p><strong>belongs_to :category</strong>: indicates that each ignore relationship belongs to a single category.
It does not have any custom methods.</p>
<p>Here is an example of how the Ignore model could be used:</p>
<p>Create a new ignore relationship between a user and a category</p>
<pre><code>ignore = Ignore.new(user: current_user, category: category)
</code></pre>
<p>Save the ignore relationship</p>
<pre><code>ignore.save
</code></pre>
<p>Find all the categories that a user is ignoring</p>
<pre><code>ignored_categories = Ignore.where(user: current_user).includes(:category)
</code></pre>
<h1 id="interaction"><strong>Interaction</strong></h1>
<p>The Interaction model represents a user interaction with a staff member, branch, or category. These interactions can be of different types, such as a recommendation or booking a taxi.</p>
<p>Attributes:</p>
<p><strong>id</strong>: a unique identifier for the interaction
<strong>user_id</strong>: the ID of the user who is interacting
<strong>staff_member_id</strong>: the ID of the staff member involved in the interaction
<strong>branch_id</strong>: the ID of the branch involved in the interaction
<strong>category_id</strong>: the ID of the category involved in the interaction
<strong>description</strong>: a description of the interaction
<strong>created_at</strong>: the date and time that the interaction was created
<strong>updated_at</strong>: the date and time that the interaction was last updated
<strong>type</strong>: the type of interaction</p>
<p>Relationships:</p>
<p><strong>belongs_to :user</strong>: the interaction belongs to a user
<strong>belongs_to :staff_member</strong>: the interaction may involve a staff member
<strong>belongs_to :branch</strong>: the interaction may involve a branch
<strong>belongs_to :category</strong>: the interaction may involve a category</p>
<p>Custom methods:</p>
<p><strong>mood?</strong>: returns a boolean indicating whether the interaction is a mood type</p>
<p><strong>partner_type?</strong>: returns a boolean indicating whether the interaction is a partner type (i.e. a type that involves a staff member or branch)</p>
<p>Examples of usage:</p>
<p>Retrieving a list of interactions for a particular user:</p>
<pre><code>Interaction.where(user_id: user.id)
</code></pre>
<p>Retrieving a list of mood interactions for today: </p>
<pre><code>Interaction.where(type: 'mood').for_today
</code></pre>
<h1 id="memberrequestmessage"><strong>MemberRequestMessage</strong></h1>
<p>The MemberRequestMessage model represents a message sent within a MemberRequest conversation between a staff member and a user.</p>
<p>Attributes:</p>
<p><strong>id (integer)</strong>: The unique identifier for the message.</p>
<p><strong>body (text)</strong>: The content of the message.</p>
<p><strong>status (string)</strong>: The current status of the message, which can be pending, sent, or read.</p>
<p><strong>member_request_id (integer)</strong>: The identifier for the MemberRequest conversation to which the message belongs.</p>
<p><strong>messageable_id (integer)</strong>: The identifier for the user or staff member who sent the message.</p>
<p><strong>messageable_type (string)</strong>: The type of the sender, either User or StaffMember.</p>
<p><strong>created_at (datetime)</strong>: The timestamp when the message was created.</p>
<p><strong>updated_at (datetime)</strong>: The timestamp when the message was last updated.</p>
<p>Relationships:</p>
<p><strong>belongs_to member_request</strong>: The MemberRequest conversation to which the message belongs.</p>
<p><strong>belongs_to messageable (polymorphic)</strong>: The user or staff member who sent the message.</p>
<p>Custom methods:</p>
<p><strong>mark_as_read</strong>: Changes the status attribute to read.</p>
<p><strong>mark_as_unread</strong>: Changes the status attribute to pending.</p>
<p><strong>mark_as_sent</strong>: Changes the status attribute to sent.</p>
<p><strong>read?</strong>: Returns a boolean indicating whether the status attribute is read.</p>
<p>Examples of usage:</p>
<p>Create a new message:</p>
<pre><code>mr = MemberRequest.first
message = MemberRequestMessage.new(body: 'Hello, how are you doing?', member_request: mr, messageable: staff_member)
message.save
</code></pre>
<p>Mark a message as read:</p>
<pre><code>message = MemberRequestMessage.first
message.mark_as_read!
</code></pre>
<p>Check if a message has been read:</p>
<pre><code>message = MemberRequestMessage.first
message.read?
</code></pre>
<p>Get all unread messages sent by staff members:</p>
<pre><code>MemberRequestMessage.from_staff_member.unread
</code></pre>
<h1 id="memberrequesttypeassignment"><strong>MemberRequestTypeAssignment</strong></h1>
<p>The MemberRequestTypeAssignment model represents a many-to-many relationship between Role and MemberRequestType models. It allows the assignment of one or more roles to a member request type, indicating which staff members are responsible for handling member requests of that type.</p>
<p>Attributes:</p>
<p><strong>id (integer)</strong>: the primary key for the model.</p>
<p><strong>role_id (integer)</strong>: the foreign key for the Role model, indicating the role being assigned to the member request type.</p>
<p><strong>member_request_type_id (integer)</strong>: the foreign key for the MemberRequestType model, indicating the member request type being assigned to the role.</p>
<p><strong>created_at (datetime)</strong>: the timestamp for when the record was created.</p>
<p><strong>updated_at (datetime)</strong>: the timestamp for when the record was last updated.</p>
<p>Relationships:</p>
<p><strong>belongs_to</strong>: the MemberRequestTypeAssignment model belongs to both the Role and MemberRequestType models.
Custom methods:</p>
<p>None.
Examples of usage:</p>
<p>Assign the 'customer_service' role to the 'booking' member request type</p>
<pre><code>member_request_type = MemberRequestType.find_by(name: 'booking')
role = Role.find_by(name: 'customer_service')
assignment = MemberRequestTypeAssignment.create(member_request_type: member_request_type, role: role)
</code></pre>
<p>Get the member request types assigned to the 'customer_service' role</p>
<pre><code>role = Role.find_by(name: 'customer_service')
member_request_types = role.member_request_types
</code></pre>
<h1 id="memberrequesttype"><strong>MemberRequestType</strong></h1>
<p>The MemberRequestType model represents a type of request that can be made by a member (user) to staff members in an organisation.</p>
<p>Attributes:</p>
<p><strong>id</strong>: a unique identifier for the request type (integer, primary key)</p>
<p><strong>name</strong>: the name of the request type (string)</p>
<p><strong>business_unit_id</strong>: the unique identifier of the business unit to which the request type belongs (integer)</p>
<p><strong>created_at</strong>: the date and time at which the request type was created (datetime)</p>
<p><strong>updated_at</strong>: the date and time at which the request type was last updated (datetime)</p>
<p><strong>archived_at</strong>: the date and time at which the request type was archived (datetime)</p>
<p>Relationships:</p>
<p><strong>business_unit</strong>: a belongs-to relationship with the BusinessUnit model. A request type belongs to a single business unit.</p>
<p><strong>organisation</strong>: a has-one-through relationship with the Organisation model. A request type has a single organisation through its business unit.</p>
<p><strong>member_request_type_assignments</strong>: a has-many relationship with the MemberRequestTypeAssignment model. A request type has many type assignments.</p>
<p><strong>roles</strong>: a has-many-through relationship with the Role model. A request type has many roles through its type assignments.</p>
<p><strong>staff_members</strong>: a has-many-through relationship with the StaffMember model. A request type has many staff members through its roles.</p>
<p>Custom methods:</p>
<p><strong>acts_as_paranoid</strong>: this is a method provided by the ActsAsParanoid gem which allows the request type to be "soft deleted" by setting the archived_at attribute to the current date and time. This allows the request type to be restored if necessary.</p>
<p>Examples of usage:</p>
<p>Creating a new request type:</p>
<pre><code>request_type = MemberRequestType.new(name: 'Booking assistance')
request_type.business_unit = BusinessUnit.first
request_type.save
</code></pre>
<h1 id="memberrequest"><strong>MemberRequest</strong></h1>
<p>Description: This model represents a request made by a member (user) to the staff of a branch. It has a type (e.g. booking, service request, etc.) and a status (open, pending, closed). The request can be composed of multiple messages exchanged between the member and the staff.</p>
<p>Attributes:</p>
<p><strong>id</strong>: a unique identifier for the request (integer, primary key)</p>
<p><strong>user_id</strong>: the id of the member who made the request (integer, foreign key to the users table)</p>
<p><strong>branch_id</strong>: the id of the branch where the request was made (integer, foreign key to the branches table)
member_request_type_id: the id of the type of request (integer, foreign key to the member_request_types table)</p>
<p><strong>status</strong>: the current status of the request (string, can be "open", "pending", or "closed")</p>
<p><strong>created_at</strong>: the timestamp for when the request was created (datetime)</p>
<p><strong>updated_at</strong>: the timestamp for when the request was last updated (datetime)</p>
<p><strong>last_message_sent_at</strong>: the timestamp for when the last message was sent for this request (datetime)</p>
<p>Relationships:</p>
<p><strong>belongs_to :user</strong></p>
<p><strong>belongs_to :branch</strong></p>
<p><strong>belongs_to :member_request_type</strong></p>
<p><strong>has_many :member_request_messages, dependent: :destroy</strong></p>
<p>Custom methods:</p>
<p><strong>mark_as_unread</strong>: marks the last message from the member as unread.</p>
<p>Examples of usage:</p>
<p>Create a new member request:</p>
<pre><code>request = MemberRequest.new(user_id: 1, branch_id: 2, member_request_type_id: 3, status: "open")
request.member_request_messages.build(body: "Hi, I would like to book a table for two on Friday at 7pm.", messageable_type: "User")
request.save
</code></pre>
<p>Find all open member requests for a specific branch:</p>
<pre><code>requests = MemberRequest.for_branch(2).in_status("open")
</code></pre>
<p>Find all member requests for a specific member:</p>
<pre><code>requests = MemberRequest.for_member(1)
</code></pre>
<p>Find all member requests with a specific message:</p>
<pre><code>requests = MemberRequest.with_message(5)
</code></pre>
<h1 id="notification"><strong>Notification</strong></h1>
<p>The Notification model represents a notification that can be sent to a user. It can be associated with a specific object, such as a Branch or MemberRequestMessage, through a polymorphic association.</p>
<p>Attributes:</p>
<p><strong>user_id</strong>: The ID of the user who will receive the notification.</p>
<p><strong>type</strong>: The type of notification, represented as a string.</p>
<p><strong>response</strong>: A JSONb field that can store a response from the user to the notification.</p>
<p><strong>object_type</strong>: The type of object that the notification is associated with, stored as a string.</p>
<p><strong>object_id</strong>: The ID of the object that the notification is associated with.</p>
<p><strong>created_at</strong>: The timestamp when the notification was created.</p>
<p><strong>updated_at</strong>: The timestamp when the notification was last updated.</p>
<p><strong>read_at</strong>: The timestamp when the notification was marked as read by the user.</p>
<p><strong>responded_at</strong>: The timestamp when the user responded to the notification.</p>
<p>Relationships:</p>
<p><strong>belongs_to :user</strong>: The user who will receive the notification.
belongs_to :object, polymorphic: true: The object that the notification is associated with.
Custom methods:</p>
<p><strong>human_type</strong>: Returns the type of the notification in a human-readable format (e.g. "new_message" for Notification::NewMessage).</p>
<p><strong>mark_as_read</strong>: Marks the notification as read by updating the read_at attribute.
self.mark_all_read: Marks all notifications as read for the current user by updating the read_at attribute.</p>
<p><strong>name</strong>: Returns the name of the object that the notification is associated with, or the name of the branch if the object is a MemberRequestMessage.</p>
<p>Examples of usage:</p>
<p>Create a new notification</p>
<pre><code>notification = Notification::NewMessage.create!(user: user, object: member_request_message)
</code></pre>
<p>Mark a notification as read</p>
<pre><code>notification.mark_as_read
</code></pre>
<p>Mark all notifications as read for a user</p>
<pre><code>Notification.where(user: user).mark_all_read
</code></pre>
<p>Find unread notifications for a user</p>
<pre><code>unread_notifications = Notification.where(user: user).unread
</code></pre>
<h1 id="organisation"><strong>Organisation</strong></h1>
<p>The Organisation model represents a company or organization in the system. It has the following attributes:</p>
<p><strong>id</strong>: a unique identifier for the organisation, stored as a big integer and generated automatically by the database.</p>
<p><strong>name</strong>: a string containing the name of the organization. This attribute is required.</p>
<p><strong>about</strong>: a text field containing information about the organization.</p>
<p><strong>archived_at</strong>: a datetime field containing the date and time at which the organization was archived. If 
the organization has not been archived, this field is nil.</p>
<p>The Organisation model has the following relationships:</p>
<p><strong>address</strong>: a one-to-one relationship with the Address model, representing the address of the organization.</p>
<p><strong>photo</strong>: a one-to-one relationship with the Photo model, representing a photo of the organization.</p>
<p><strong>staff_members</strong>: a one-to-many relationship with the StaffMember model, representing the staff members of the organization.</p>
<p><strong>branch_managers</strong>: a one-to-many relationship with the BranchManager model, representing the branch managers of the organization.</p>
<p><strong>admins</strong>: a one-to-many relationship with the Admin model, representing the administrators of the organization.</p>
<p><strong>business_units</strong>: a one-to-many relationship with the BusinessUnit model, representing the business units within the organization.</p>
<p><strong>branches</strong>: a many-to-many relationship with the Branch model, through the BusinessUnit model, representing the branches that belong to the organization.</p>
<p><strong>roles</strong>: a many-to-many relationship with the Role model, through the BusinessUnit model, representing the roles that exist within the organization.</p>
<p><strong>videos</strong>: a one-to-many relationship with the Video model, representing the videos associated with the organization.</p>
<p>The Organisation model has the following custom methods:</p>
<p><strong>reject_photo?(attributes)</strong>: a private method used to determine whether a photo should be rejected when creating or updating an organization. It returns true if the image attribute of the attributes parameter is blank, and false otherwise.</p>
<p>An example of usage for the Organisation model could be:</p>
<p>Create a new organization</p>
<pre><code>org = Organisation.new(name: "My Organization")
</code></pre>
<h1 id="partnercategory"><strong>PartnerCategory</strong></h1>
<p>The PartnerCategory model represents categories for partners in the system. A partner can belong to multiple categories and each category can have multiple partners.</p>
<p>Attributes:</p>
<p><strong>id</strong>: a unique identifier for the partner category (integer, primary key)</p>
<p><strong>title</strong>: the name of the partner category (string)</p>
<p><strong>position</strong>: the position of the partner category in a list (integer)</p>
<p><strong>created_at</strong>: the timestamp when the partner category was created (datetime)</p>
<p><strong>updated_at</strong>: the timestamp when the partner category was last updated (datetime)</p>
<p>Relationships:</p>
<p><strong>branch_categorisations</strong>: a has-many relationship with the BranchCategorisation model, representing the categories a branch belongs to (a branch can belong to multiple categories and a category can have multiple branches)</p>
<p><strong>branches</strong>: a has-many-through relationship with the Branch model, representing the branches that belong to the partner category</p>
<p>Custom methods:</p>
<p><strong>to_s</strong>: returns the title of the partner category as a string
Examples of usage:</p>
<p>Creating a new partner category:</p>
<pre><code>category = PartnerCategory.new(title: 'Technology')
category.save
</code></pre>
<p>Adding a branch to a partner category:</p>
<pre><code>category = PartnerCategory.find(1)
branch = Branch.find(2)
category.branches &lt;&lt; branch
</code></pre>
<p>Displaying the title of a partner category:</p>
<pre><code>category = PartnerCategory.find(1)
puts category.to_s # outputs the title of the partner category
</code></pre>
<h1 id="personality"><strong>Personality</strong></h1>
<p>The Personality model represents the personality of a user. It is composed of three sub-models: Lifestyle, Food, and Wine.</p>
<p>Attributes: None.</p>
<p>Relationships: The Personality model has three sub-models: Lifestyle, Food, and Wine. Each of these sub-models has a one-to-one relationship with the Personality model.</p>
<p>Custom Methods:</p>
<p>initialize(user): Initializes a new instance of the Personality model with a given user.
result: Returns a hash containing the results of the Lifestyle, Food, and Wine sub-models.</p>
<p>Examples of usage:</p>
<pre><code>user = User.find(1)
personality = Personality.new(user)
results = personality.result
</code></pre>
<h1 id="photo"><strong>Photo</strong></h1>
<p>The Photo model represents a photo that belongs to an owner object through polymorphic association. It has the following attributes:</p>
<p><strong>id</strong>: a unique integer identifier for the photo, generated by the database</p>
<p><strong>owner_id</strong>: an integer representing the ID of the owner object that this photo belongs to</p>
<p><strong>owner_type</strong>: a string representing the type of the owner object that this photo belongs to (e.g. "Branch", "User")</p>
<p><strong>image</strong>: a string representing the location of the photo file on the filesystem or in a file storage service (e.g. Amazon S3)</p>
<p><strong>created_at</strong>: a datetime representing the time when the photo was created</p>
<p><strong>updated_at</strong>: a datetime representing the time when the photo was last updated</p>
<p><strong>photo_type</strong>: a string representing the type of the photo (e.g. "logo", "cover photo")</p>
<p>The Photo model also has the following relationships:</p>
<p><strong>belongs_to :owner, polymorphic: true, touch: true</strong>: this indicates that a photo belongs to an owner object, and the owner object can be any type of object (specified by the owner_type attribute). The touch: true option tells Rails to update the updated_at timestamp of the owner object when the photo is updated.</p>
<p>The Photo model has the following custom methods:</p>
<p><strong>safe_recreate_versions!</strong>: this method is used to recreate the different versions (resized versions) of the photo file. It first retrieves the original file from the cache, then recreates the versions and saves the changes to the model.</p>
<p><strong>preview_data</strong>: this method returns a base64-encoded version of the photo file's preview version, suitable for use in a data URI. It uses the Rails.cache to store the result and avoid recalculating it every time it is called.</p>
<p>An example of usage for the Photo model might be:</p>
<pre><code># Create a new photo for a branch object
branch = Branch.first
photo = Photo.new(owner: branch, image: params[:image])
if photo.save
</code></pre>
<h1 id="preferencegroup"><strong>PreferenceGroup</strong></h1>
<p>The PreferenceGroup model represents a group of questions that are related to each other. It has the following attributes:</p>
<p>id: a unique identifier for the preference group (integer, primary key).
title: a string representing the title of the preference group.
question_ids: an array of integers representing the ids of the questions that belong to the preference group.
created_at: a datetime representing when the preference group was created.
updated_at: a datetime representing the last time the preference group was updated.
It has the following relationships:</p>
<p>has_many :role_preference_group_assignments: this indicates that a preference group can have many assignments to roles.
It has the following custom methods:</p>
<p>question_ids=: this method is used to set the question_ids attribute, and it removes any blank values from the array of new ids before saving them.
questions: this method returns a collection of Question objects that belong to the preference group, based on the question_ids attribute.
An example of usage could be:</p>
<pre><code># Find the preference group with id 1
pg = PreferenceGroup.find(1)

# Display the title of the preference group
puts pg.title
# =&gt; "Food Preferences"

# Display the questions that belong to the preference group
pg.questions.each do |question|
puts question.text
end
# =&gt; "What is your favourite type of cuisine?"
# =&gt; "Do you have any dietary restrictions?"
# =&gt; "Do you have any food allergies?"
</code></pre>
<h1 id="profilerequest"><strong>ProfileRequest</strong></h1>
<p>The ProfileRequest model represents a request made by a user for access to a branch's profile page. It has the following attributes:</p>
<p><strong>id</strong>: a unique identifier for the request</p>
<p><strong>branch_id</strong>: the ID of the branch that the user is requesting access to</p>
<p><strong>user_id</strong>: the ID of the user making the request</p>
<p><strong>created_at</strong>: a timestamp for when the request was created</p>
<p><strong>updated_at</strong>: a timestamp for when the request was last updated</p>
<p>It has the following relationships:</p>
<p>belongs_to :branch: indicates that each ProfileRequest belongs to a single Branch
belongs_to :user: indicates that each ProfileRequest belongs to a single User
It does not have any custom methods or examples of usage.</p>
<h1 id="question"><strong>Question</strong></h1>
<p>The Question model represents a question that can be asked to a user. It has various attributes such as title, kind, and locking_conditions that define the question and its behavior. The Question model also has relationships with other models such as Category, Photo, Answer, and UserAnswer.</p>
<p>Attributes</p>
<p><strong>id (bigint, primary key)</strong>: a unique identifier for the question.</p>
<p><strong>category_id (integer)</strong>: the id of the category that the question belongs to.</p>
<p><strong>title (citext)</strong>: the title of the question.</p>
<p><strong>kind (string)</strong>: the type of question, which can be one of the following values: 'option', 'unordered_list', 'ordered_list', 'boolean', 'number', 'number_range', 'temperature', 'temperature_range', 'text', 'time', 'time_range'.</p>
<p><strong>created_at (datetime)</strong>: the timestamp when the question was created.</p>
<p><strong>updated_at (datetime)</strong>: the timestamp when the question was last updated.</p>
<p><strong>locking_conditions (jsonb)</strong>: a JSON object that defines the conditions under which the question should be locked.</p>
<p><strong>intro (boolean)</strong>: a flag indicating whether the question is an introduction question.</p>
<p><strong>allows_note (boolean)</strong>: a flag indicating whether the question allows the user to add a note.</p>
<p><strong>note_title (string)</strong>: the title of the note that the user can add to the question.</p>
<p><strong>processed_at (datetime)</strong>: the timestamp when the question was processed.</p>
<p><strong>text_style (string)</strong>: the style of the text for the question. Can be one of the following values: 'dark', 'light', 'dark-gold', 'light-gold'.</p>
<p><strong>blur_background (boolean)</strong>: a flag indicating whether the background should be blurred for the question.
    background_overlay (boolean): a flag indicating whether there should be an overlay on the background for the question.</p>
<p>Relationships</p>
<p><strong>category (belongs_to)</strong>: the category that the question belongs to.</p>
<p><strong>photo (has_one)</strong>: the photo that is associated with the question.</p>
<p><strong>answers (has_many)</strong>: the answers that are available for the question.</p>
<p><strong>user_answers (has_many)</strong>: the answers that have been given by users for the question.</p>
<p>Custom Methods</p>
<p><strong>enumerable_kind?</strong>: returns a boolean indicating whether the question is one of the following types: 'option', 'unordered_list', 'ordered_list', 'boolean', 'number', 'number_range', 'temperature', 'temperature_range'.</p>
<p><strong>diverse_kind?</strong>: returns a boolean indicating whether the question is one of the following types: 'text', 'time', 'time_range'.</p>
<p>Examples of Usage</p>
<p>Here are some examples of how the Question model can be used:</p>
<p>To create a new question:</p>
<pre><code>question = Question.new(title: 'What is your favorite color?', kind: 'option')
question.save
</code></pre>
<p>To retrieve all the questions in a particular category:</p>
<pre><code>category = Category.find_by(name: 'Personal')
questions = Question.in_category(category)
</code></pre>
<h1 id="rating"><strong>Rating</strong></h1>
<p>The Rating model represents a rating given by a user for a particular branch. It has various attributes such as value that define the rating, and relationships with other models such as Branch and User.</p>
<p>Attributes</p>
<p><strong>id (bigint, primary key)</strong>: a unique identifier for the rating.</p>
<p><strong>branch_id (bigint)</strong>: the id of the branch that the rating is for.</p>
<p><strong>user_id (bigint)</strong>: the id of the user who gave the rating.</p>
<p><strong>value (integer)</strong>: the value of the rating, which must be an integer between 1 and 5.</p>
<p><strong>created_at (datetime)</strong>: the timestamp when the rating was created.</p>
<p><strong>updated_at (datetime)</strong>: the timestamp when the rating was last updated.</p>
<p>Relationships</p>
<p><strong>branch (belongs_to)</strong>: the branch that the rating is for.</p>
<p><strong>user (belongs_to)</strong>: the user who gave the rating.</p>
<p>Custom Methods
There are no custom methods defined in the Rating model.</p>
<p>Examples of Usage
Here are some examples of how the Rating model can be used:</p>
<p>To create a new rating:</p>
<pre><code>branch = Branch.find_by(name: 'My Branch')
user = User.find_by(email: 'user@example.com')
rating = Rating.new(branch: branch, user: user, value: 4)
rating.save
</code></pre>
<p>To retrieve all the ratings for a particular branch:</p>
<pre><code>branch = Branch.find_by(name: 'My Branch')
ratings = Rating.where(branch: branch)
</code></pre>
<p>To retrieve the average rating value for a particular branch:</p>
<pre><code>branch = Branch.find_by(name: 'My Branch')
average_rating = Rating.where(branch: branch).average(:value)
</code></pre>
<h1 id="release"><strong>Release</strong></h1>
<p>The Release model represents a release of data. It has various attributes such as file and status that define the release, and a relationship with the ReleaseFileUploader uploader.</p>
<p>Attributes</p>
<p><strong>id (bigint, primary key)</strong>: a unique identifier for the release.</p>
<p><strong>file (string)</strong>: the file that contains the data for the release.</p>
<p><strong>status (string)</strong>: the status of the release, which can be one of the following values: 'queued', 'processing', 'complete'.</p>
<p><strong>created_at (datetime)</strong>: the timestamp when the release was created.</p>
<p><strong>updated_at (datetime)</strong>: the timestamp when the release was last updated.</p>
<p>Relationships</p>
<p><strong>file (mount_uploader)</strong>: the ReleaseFileUploader uploader that is used to handle the file for the release.</p>
<p>Custom Methods</p>
<p><strong>latest</strong>: returns the latest complete release.</p>
<p><strong>latest_timestamp</strong>: returns the timestamp of the latest complete release.</p>
<p><strong>latest_id</strong>: returns the id of the latest complete release.</p>
<p><strong>latest?</strong>: returns a boolean indicating whether the release is the latest complete release.</p>
<p><strong>queued?</strong>: returns a boolean indicating whether the release is in the 'queued' status.</p>
<p><strong>processing?</strong>: returns a boolean indicating whether the release is in the 'processing' status.</p>
<p><strong>complete?</strong>: returns a boolean indicating whether the release is in the 'complete' status.</p>
<p><strong>process!</strong>: sets the status of the release to 'processing' and broadcasts the status change.</p>
<p><strong>complete!</strong>: sets the status of the release to 'complete' and broadcasts the status change.</p>
<p>Examples of Usage
Here are some examples of how the Release model can be used:</p>
<p>To create a new release:</p>
<pre><code>release = Release.new(file: '/path/to/file.csv')
release.save
</code></pre>
<p>To retrieve the latest complete release:</p>
<pre><code>latest_release = Release.latest
</code></pre>
<p>To retrieve the timestamp of the latest complete release:</p>
<pre><code>latest_timestamp = Release.latest_timestamp
</code></pre>
<p>To check if a particular release is the latest complete release:</p>
<pre><code>release = Release.find(1)
release.latest?
</code></pre>
<p>To set the status of a release to 'processing':</p>
<pre><code>release = Release.find(1)
release.process!
</code></pre>
<p>To set the status of a release to 'complete':</p>
<pre><code>release = Release.find(1)
release.complete!
</code></pre>
<h1 id="roleassignment"><strong>RoleAssignment</strong></h1>
<p>The RoleAssignment model represents a role that has been assigned to a staff member. It has various attributes such as role_id and staff_member_id that define the assignment, and relationships with other models such as Role and StaffMember.</p>
<p>Attributes</p>
<p><strong>id (bigint, primary key)</strong>: a unique identifier for the role assignment.</p>
<p><strong>role_id (bigint)</strong>: the id of the role that has been assigned.</p>
<p><strong>staff_member_id (bigint)</strong>: the id of the staff member who has been assigned the role.</p>
<p><strong>archived_at (datetime)</strong>: the timestamp when the role assignment was archived.</p>
<p><strong>created_at (datetime)</strong>: the timestamp when the role assignment was created.</p>
<p><strong>updated_at (datetime)</strong>: the timestamp when the role assignment was last updated.</p>
<p>Relationships</p>
<p><strong>role (belongs_to)</strong>: the role that has been assigned.</p>
<p><strong>staff_member (belongs_to)</strong>: the staff member who has been assigned the role.</p>
<p>Custom Methods</p>
<p>There are no custom methods defined in the RoleAssignment model.</p>
<p>Examples of Usage
Here are some examples of how the RoleAssignment model can be used:</p>
<p>To create a new role assignment:</p>
<pre><code>role = Role.find_by(name: 'Manager')
staff_member = StaffMember.find_by(email: 'staff@example.com')
role_assignment = RoleAssignment.new(role: role, staff_member: staff_member)
role_assignment.save
</code></pre>
<p>To retrieve all the role assignments for a particular role:</p>
<pre><code>role = Role.find_by(name: 'Manager')
role_assignments = RoleAssignment.where(role: role)
</code></pre>
<p>To retrieve all the role assignments for a particular staff member:</p>
<pre><code>staff_member = StaffMember.find_by(email: 'staff@example.com')
role_assignments = RoleAssignment.where(staff_member: staff_member)
</code></pre>
<h1 id="rolepreferencegroupassignment"><strong>RolePreferenceGroupAssignment</strong></h1>
<p>The RolePreferenceGroupAssignment model represents the assignment of a preference group to a role. It has various attributes such as role_id, preference_group_id, and position that define the assignment, and relationships with other models such as Role and PreferenceGroup.</p>
<p>Attributes</p>
<p><strong>id (bigint, primary key)</strong>: a unique identifier for the role preference group assignment.</p>
<p><strong>role_id (bigint)</strong>: the id of the role to which the preference group has been assigned.</p>
<p><strong>preference_group_id (bigint)</strong>: the id of the preference group that has been assigned to the role.</p>
<p><strong>position (integer)</strong>: the position of the preference group within the role.</p>
<p><strong>column (string)</strong>: the column in which the preference group should be displayed (either 'left' or 'right').</p>
<p><strong>created_at (datetime)</strong>: the timestamp when the role preference group assignment was created.</p>
<p><strong>updated_at (datetime)</strong>: the timestamp when the role preference group assignment was last updated.</p>
<p>Relationships</p>
<p><strong>role (belongs_to)</strong>: the role to which the preference group has been assigned.</p>
<p><strong>preference_group (belongs_to)</strong>: the preference group that has been assigned to the role.</p>
<p>**Custom Methods</p>
<p><strong>left</strong>: a scope that returns all the role preference group assignments with the column attribute set to 'left'.</p>
<p><strong>right</strong>: a scope that returns all the role preference group assignments with the column attribute set to 'right'.</p>
<p>Examples of Usage
Here are some examples of how the RolePreferenceGroupAssignment model can be used:</p>
<p>To create a new role preference group assignment:</p>
<pre><code>role = Role.find_by(name: 'Manager')
preference_group = PreferenceGroup.find_by(name: 'General')
role_preference_group_assignment = RolePreferenceGroupAssignment.new(
    role: role,
    preference_group: preference_group,
    position: 1,
    column: 'left'
    )
role_preference_group
</code></pre>
<h1 id="role"><strong>Role</strong></h1>
<p>The Role model represents a role within an organization. It has various attributes such as name, business_unit_id, and interactions that define the role, and relationships with other models such as BusinessUnit, StaffMember, and MemberRequestType.</p>
<p>Attributes</p>
<p><strong>id (bigint, primary key)</strong>:a unique identifier for the role.</p>
<p><strong>name (string)</strong>:the name of the role.</p>
<p><strong>created_at (datetime)</strong>:the timestamp when the role was created.</p>
<p><strong>updated_at (datetime)</strong>:the timestamp when the role was last updated.</p>
<p><strong>archived_at (datetime)</strong>:the timestamp when the role was archived (if applicable).</p>
<p><strong>business_unit_id (bigint)</strong>:the id of the business unit to which the role belongs.</p>
<p><strong>top_questions_data (jsonb)</strong>:a JSON object containing data about the top questions for the role.</p>
<p><strong>interactions (string, array)</strong>:an array of strings representing the interactions that are allowed for the role.</p>
<p>Relationships</p>
<p><strong>business_unit (belongs_to)</strong>:the business unit to which the role belongs.</p>
<p><strong>organisation (has_one, through: business_unit)</strong>:the organization to which the role belongs.</p>
<p><strong>role_assignments (has_many)</strong>:the assignments of staff members to the role.</p>
<p><strong>staff_members (has_many, through: role_assignments)</strong>:the staff members who have been assigned to the role.</p>
<p><strong>member_request_type_assignments (has_many)</strong>:the assignments of member request types to the role.</p>
<p><strong>member_request_types (has_many, through: member_request_type_assignments)</strong>:the member request types that have been assigned to the role.</p>
<p>Custom Methods</p>
<p>**top_questions_data=: a setter method that sets the top_questions_data attribute and converts the values to integers.</p>
<p><strong>top_question(position)</strong>:a method that returns the id of the top question at the specified position.</p>
<p><strong>top_question_ids</strong>: a method that returns an array of ids of the top questions for the role.</p>
<p><strong>top_questions</strong>: a method that returns the top questions for the role as a collection of Question objects.</p>
<h1 id="share"><strong>Share</strong></h1>
<p>The Share model represents a user's request to share a Branch with another user. It has several attributes:</p>
<p><strong>branch_id</strong>: an integer that represents the Branch being shared</p>
<p><strong>user_id</strong>: an integer that represents the User making the request</p>
<p><strong>status</strong>: a string that represents the current state of the share request (e.g. requested, authorised, revoked, denied)</p>
<p><strong>via</strong>: a string that represents how the request was made (e.g. web, email, sms)</p>
<p><strong>requested_at, authorised_at, denied_at, revoked_at</strong>: timestamps for when the respective actions were taken</p>
<p>It has several relationships:</p>
<p><strong>belongs_to :branch</strong>: a Share belongs to a Branch</p>
<p><strong>belongs_to :user</strong>: a Share belongs to a User</p>
<p>It has several custom methods:</p>
<p><strong>request, authorise, deny, revoke</strong>: methods that update the status attribute and perform other actions depending on the transition (e.g. sending notifications, scheduling a reminder job). These methods are implemented using the aasm gem for state management.</p>
<p><strong>revoke_all</strong>: a class method that updates the status attribute of all authorised shares to revoked</p>
<p><strong>create_request_notification, authorise_notifications, deny_notifications, update_notifications, schedule_reminder, notify_graphql_share_change</strong>: private methods that perform actions such as creating notifications, scheduling jobs, and triggering GraphQL subscriptions.</p>
<p>An example of usage:</p>
<pre><code>share = Share.new(branch_id: 1, user_id: 2)
share.request
</code></pre>
<p>This will create a new Share object with a status of requested, and trigger the create_request_notification method to send a notification to the user.</p>
<h1 id="staffassignment"><strong>StaffAssignment</strong></h1>
<p>The StaffAssignment model represents an association between a staff member and a target object. The target object can be any object that has an id column in the database and is polymorphic (can be associated with multiple types of objects).</p>
<p>Attributes</p>
<p><strong>id</strong>: A big integer primary key.</p>
<p><strong>staff_member_id</strong>: An integer that represents the id of the associated staff member.</p>
<p><strong>target_type</strong>: A string that represents the class name of the associated target object.</p>
<p><strong>target_id</strong>: An integer that represents the id of the associated target object.</p>
<p><strong>created_at</strong>: A datetime that represents the time at which the staff assignment was created.</p>
<p><strong>updated_at</strong>: A datetime that represents the time at which the staff assignment was last updated.</p>
<p><strong>archived_at</strong>: A datetime that represents the time at which the staff assignment was archived.</p>
<p>Relationships</p>
<p>belongs_to :staff_member: The staff assignment belongs to a staff member.
belongs_to :target, polymorphic: true: The staff assignment belongs to a target object that is polymorphic.
Custom Methods</p>
<p>None.</p>
<p>Examples of Usage</p>
<p>Suppose we have a Project model and a StaffMember model and we want to create a staff assignment that associates a staff member with a project. We could do so as follows:</p>
<pre><code>project = Project.find(1)
staff_member = StaffMember.find(2)

staff_assignment = StaffAssignment.new(
staff_member: staff_member,
target: project
)

if staff_assignment.save
puts "Staff assignment created successfully!"
else
puts "Error creating staff assignment: #{staff_assignment.errors.full_messages.join(', ')}"
end
</code></pre>
<!-- # **StaffMember** -->

<h1 id="topquestion"><strong>TopQuestion</strong></h1>
<p>The TopQuestion model is a subclass of the Question model, which represents a question that can be asked to users. It has the following attributes:</p>
<p><strong>id</strong>: a primary key, an integer, that uniquely identifies the question.</p>
<p><strong>category_id</strong>: an integer that represents the category to which the question belongs.</p>
<p><strong>title</strong>: a string that represents the title of the question.</p>
<p><strong>kind</strong>: a string that represents the type of question, such as multiple choice or true/false.</p>
<p><strong>created_at</strong>: a datetime that represents the time when the question was created.</p>
<p><strong>updated_at</strong>: a datetime that represents the time when the question was last updated.</p>
<p><strong>locking_conditions</strong>: a jsonb field that represents the conditions under which the question is locked.</p>
<p><strong>intro</strong>: a boolean field that represents whether the question is an introduction question or not.</p>
<p><strong>allows_note</strong>: a boolean field that represents whether the question allows users to add a note or not.</p>
<p><strong>note_title</strong>: a string that represents the title of the note that users can add.</p>
<p><strong>processed_at</strong>: a datetime that represents the time when the question was processed.</p>
<p><strong>text_style</strong>: a string that represents the style of the text used in the question.</p>
<p><strong>blur_background</strong>: a boolean field that represents whether the background of the question should be blurred or not.</p>
<p><strong>background_overlay</strong>: a boolean field that represents whether an overlay should be applied to the background of the question or not.</p>
<p>The TopQuestion model has the following custom method:</p>
<p>answers: returns a relation that represents the answers given by the user specified by the user_id class attribute to the question.
An example of usage of the TopQuestion model is as follows:</p>
<pre><code># Set the user ID for the current thread
TopQuestion.user_id = current_user.id

# Find the top question for the user
top_question = TopQuestion.find(params[:id])

# Get the answers given by the user to the top question
answers = top_question.answers
</code></pre>
<h1 id="useranswer"><strong>UserAnswer</strong></h1>
<p>The UserAnswer model represents an answer to a question by a user. It has the following attributes:</p>
<p><strong>id</strong>: a unique identifier for the answer, stored as a bigint</p>
<p><strong>user_id</strong>: the identifier of the user who provided the answer, stored as an integer</p>
<p><strong>question_id</strong>: the identifier of the question being answered, stored as an integer</p>
<p><strong>created_at</strong>: a timestamp for when the answer was created, stored as a datetime</p>
<p><strong>updated_at</strong>: a timestamp for when the answer was last updated, stored as a datetime</p>
<p><strong>note</strong>: a text field for storing a note or explanation related to the answer</p>
<p><strong>values</strong>: a text field for storing the actual answer, which can be serialized into different data types depending on the type of the question</p>
<p>It has the following relationships:</p>
<p><strong>belongs_to :question</strong>: each answer belongs to a single question</p>
<p><strong>belongs_to :user</strong>: each answer is provided by a single user</p>
<p>It has the following custom methods:</p>
<p><strong>Question::KINDS.each do |kind_name| define_method("#{kind_name}?") { kind == kind_name } end</strong>: this generates methods for each type of question, such as ordered_list?, unordered_list?, text?, etc., which return a boolean indicating whether the answer's question has the corresponding type.</p>
<p><strong>values_format</strong>: a private method that validates the format of the values attribute based on the type of the question. If the format is invalid, it adds an error to the values attribute.
Here are some examples of how the UserAnswer model could be used:</p>
<pre><code># Create a new user answer
answer = UserAnswer.new(user_id: 1, question_id: 2, values: 'This is my answer')
answer.save

# Find a user answer by its id
answer = UserAnswer.find(5)

# Update an existing user answer
answer.values = 'This is my updated answer'
answer.save

# Check if a user answer's question is of a certain type
answer.text? # returns true if the question is a text type, false otherwise

# Access the user and question associated with a user answer
user = answer.user
question = answer.question
</code></pre>
<!-- # **User** -->

<h1 id="videocontentcategory"><strong>VideoContentCategory</strong></h1>
<p>VideoContentCategory is a model in a Ruby on Rails application that represents the many-to-many relationship between videos and content categories. It has the following attributes:</p>
<p><strong>id</strong>: a bigint that serves as the primary key for the model and is automatically generated by the database.</p>
<p><strong>video_id</strong>: a bigint that represents the foreign key for the video model.</p>
<p><strong>content_category_id</strong>: a bigint that represents the foreign key for the content_category model.</p>
<p><strong>created_at</strong>: a datetime that represents when the record was created.</p>
<p><strong>updated_at</strong>: a datetime that represents when the record was last updated.</p>
<p>It has the following relationships:</p>
<p><strong>belongs_to :video</strong>: This indicates that each instance of the VideoContentCategory model belongs to a single video model.</p>
<p><strong>belongs_to :content_category</strong>: This indicates that each instance of the VideoContentCategory model belongs to a single content_category model.</p>
<p>It has the following custom methods: None.</p>
<p>Here is an example of how the VideoContentCategory model might be used:</p>
<pre><code># Create a new video content category record that associates a video with a content category
video_content_category = VideoContentCategory.new(video_id: 1, content_category_id: 2)

# Save the video content category record to the database
video_content_category.save
</code></pre>
<h1 id="video"><strong>Video</strong></h1>
<p>Video is a model in a Ruby on Rails application that represents a video that can be published and viewed by users. It has the following attributes:</p>
<p><strong>id</strong>: a bigint that serves as the primary key for the model and is automatically generated by the database.</p>
<p><strong>name</strong>: a string that represents the name of the video.</p>
<p><strong>description</strong>: a text field that provides a description of the video.</p>
<p><strong>url</strong>: a string that represents the URL of the video.</p>
<p><strong>published_at</strong>: a datetime that represents when the video was published.</p>
<p><strong>organisation_id</strong>: a bigint that represents the foreign key for the organisation model.</p>
<p><strong>vista_admin_id</strong>: a bigint that represents the foreign key for the vista_admin model.</p>
<p><strong>notification_job_id</strong>: an integer that represents the ID of a notification job related to the video.</p>
<p><strong>created_at</strong>: a datetime that represents when the record was created.</p>
<p><strong>updated_at</strong>: a datetime that represents when the record was last updated.</p>
<p><strong>published</strong>: a boolean that indicates whether the video has been published or not.</p>
<p><strong>archived_at</strong>: a datetime that represents when the video was archived.</p>
<p><strong>platform_id</strong>: a string that represents the ID of the video on a platform like Vimeo.</p>
<p>It has the following relationships:</p>
<p><strong>has_many :video_content_categories, dependent: :destroy</strong>: This indicates that a video can have many video content categories and that these should be destroyed when the video is destroyed.</p>
<p><strong>has_many :content_categories, through: :video_content_categories</strong>: This indicates that a video can have many content categories through its video content categories.</p>
<p><strong>belongs_to :vista_admin</strong>: This indicates that a video belongs to a single vista admin.</p>
<p><strong>belongs_to :organisation, optional</strong>: true: This indicates that a video can optionally belong to an organisation.</p>
<p>It has the following custom methods:</p>
<p><strong>check_published_status</strong>: This method is called before the video is saved and checks if the published status has changed. If it has and the video is being published, it sets the published_at attribute to the current time.</p>
<p><strong>extract_platform_id</strong>: This method is called before the video is saved and extracts the ID of the video on a platform like Vimeo from the url attribute.</p>
<p>It also has the following scope methods:</p>
<p><strong>in_organisation</strong>: This scope filters videos by the given organisation.</p>
<p><strong>newest_first</strong>: This scope orders videos by their created_at attribute in descending order.</p>
<p><strong>for_vista</strong>: This scope filters videos that do not belong to an organisation.</p>
<p><strong>search</strong>: This scope filters videos by a search term that is matched against the name and description attributes.</p>
<p><strong>published</strong>: This scope filters published videos.</p>
<p>Here is an example of how the Video model might be used:</p>
<p>Copy code
    # Find all published videos in an organisation
    videos = Video.in_organisation(1).published</p>
<pre><code># Find the most recently created video
newest_video = Video.newest_first.first

# Search for videos with the term 'cat' in their name or description
cat_videos = Video.search('cat')
</code></pre>
<h1 id="vistaadmin"><strong>VistaAdmin</strong></h1>
<p>VistaAdmin is a model in a Ruby on Rails application that represents an administrator for the Vista platform. It has the following attributes:</p>
<p><strong>id</strong>: a bigint that serves as the primary key for the model and is automatically generated by the database.</p>
<p><strong>first_name</strong>: a string that represents the first name of the administrator.</p>
<p><strong>last_name</strong>: a string that represents the last name of the administrator.</p>
<p><strong>email</strong>: a string that represents the email address of the administrator.</p>
<p><strong>encrypted_password</strong>: a string that represents the encrypted password of the administrator.</p>
<p><strong>reset_password_token</strong>: a string that represents a token used for resetting the password.</p>
<p><strong>reset_password_sent_at</strong>: a datetime that represents when the reset password token was sent.</p>
<p><strong>remember_created_at</strong>: a datetime that represents when the administrator chose to be remembered.</p>
<p><strong>sign_in_count</strong>: an integer that represents the number of times the administrator has signed in.</p>
<p><strong>current_sign_in_at</strong>: a datetime that represents the current sign in time of the administrator.</p>
<p><strong>last_sign_in_at</strong>: a datetime that represents the last sign in time of the administrator.</p>
<p><strong>current_sign_in_ip</strong>: an inet field that represents the current sign in IP address of the administrator.</p>
<p><strong>last_sign_in_ip</strong>: an inet field that represents the last sign in IP address of the administrator.</p>
<p><strong>confirmation_token</strong>: a string that represents a confirmation token for the administrator.</p>
<p><strong>confirmed_at</strong>: a datetime that represents when the administrator was confirmed.</p>
<p><strong>confirmation_sent_at</strong>: a datetime that represents when the confirmation token was sent.</p>
<p><strong>unconfirmed_email</strong>: a string that represents the unconfirmed email address of the administrator.</p>
<p><strong>failed_attempts</strong>: an integer that represents the number of failed attempts by the administrator.</p>
<p><strong>unlock_token</strong>: a string that represents a token used to unlock the administrator's account.</p>
<p><strong>locked_at</strong>: a datetime that represents when the administrator's account was locked.</p>
<p><strong>created_at</strong>: a datetime that represents when the record was created.</p>
<p><strong>updated_at</strong>: a datetime that represents when the record was last updated.</p>
<p>It has the following relationships:</p>
<p><strong>has_many :videos</strong>: This indicates that a VistaAdmin can have many videos.</p>
<p>It has the following custom methods:</p>
<p><strong>attempt_set_password</strong>: This method allows the administrator to set a new password without knowing the current password.</p>
<p><strong>no_password?</strong>: This method returns a boolean indicating whether the administrator has a password set.</p>
<p><strong>only_if_unconfirmed</strong>: This method yields to a block if the administrator has not been confirmed.</p>
<p><strong>password_match?</strong>: This method returns a boolean indicating whether the entered password and password confirmation match.</p>
<p>It also includes the Devise module for authentication and confirmation.</p>
<p>Here is an example of how the VistaAdmin model might be used:</p>
<pre><code># Find a VistaAdmin by email
vista_admin = VistaAdmin.find_by(email: 'admin@example.com')

# Check if the VistaAdmin's password is blank
if vista_admin.no_password?
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../route/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Index" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Index
            </div>
          </div>
        </a>
      
      
        
        <a href="concern/" class="md-footer__link md-footer__link--next" aria-label="Next: concerns" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              concerns
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.sections", "toc.follow"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>