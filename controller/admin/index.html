
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.10">
    
    
      
        <title>Admin - Vista Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#articlesphotoscontroller" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Vista Docs" class="md-header__button md-logo" aria-label="Vista Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Vista Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Admin
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Vista Docs" class="md-nav__button md-logo" aria-label="Vista Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Vista Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Folder structure
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Functions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Functions" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Functions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../function/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../function/admin/" class="md-nav__link">
        admin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../function/partner/" class="md-nav__link">
        partners
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Controller
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Controller" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Controller
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Admin
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Admin
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#articlesphotoscontroller" class="md-nav__link">
    Articles::PhotosController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#categoriesreordercontroller" class="md-nav__link">
    Categories::ReorderController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnercategoriesreordercontroller" class="md-nav__link">
    PartnerCategories::ReorderController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffadminscontroller" class="md-nav__link">
    Staff::AdminsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vistaadminsconfirmationscontroller" class="md-nav__link">
    VistaAdmins::ConfirmationsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#articlescontroller" class="md-nav__link">
    ArticlesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basecontroller" class="md-nav__link">
    BaseController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchescontroller" class="md-nav__link">
    BranchesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#businessunitscontroller" class="md-nav__link">
    BusinessUnitsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#categoriescontroller" class="md-nav__link">
    CategoriesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citiescontroller" class="md-nav__link">
    CitiesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataimportscontroller" class="md-nav__link">
    DataImportsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#organisationscontroller" class="md-nav__link">
    OrganisationsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnercategoriescontroller" class="md-nav__link">
    PartnerCategoriesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preferencegroupscontroller" class="md-nav__link">
    PreferenceGroupsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questionscontroller" class="md-nav__link">
    QuestionsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#releasescontroller" class="md-nav__link">
    ReleasesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rolescontroller" class="md-nav__link">
    RolesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#videoscontroller" class="md-nav__link">
    VideosController
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../partner/" class="md-nav__link">
        Partner
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Route
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Route" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Route
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../route/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Models" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/concern/" class="md-nav__link">
        concerns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/personality/" class="md-nav__link">
        personality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/version/" class="md-nav__link">
        version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Graphql
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Graphql" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Graphql
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../graphql/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../graphql/resolver/" class="md-nav__link">
        resolver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../graphql/type/" class="md-nav__link">
        type
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Channel
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Channel" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Channel
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../channel/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../channel/application_cable/" class="md-nav__link">
        app_controller
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#articlesphotoscontroller" class="md-nav__link">
    Articles::PhotosController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#categoriesreordercontroller" class="md-nav__link">
    Categories::ReorderController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnercategoriesreordercontroller" class="md-nav__link">
    PartnerCategories::ReorderController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffadminscontroller" class="md-nav__link">
    Staff::AdminsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vistaadminsconfirmationscontroller" class="md-nav__link">
    VistaAdmins::ConfirmationsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#articlescontroller" class="md-nav__link">
    ArticlesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#basecontroller" class="md-nav__link">
    BaseController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchescontroller" class="md-nav__link">
    BranchesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#businessunitscontroller" class="md-nav__link">
    BusinessUnitsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#categoriescontroller" class="md-nav__link">
    CategoriesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citiescontroller" class="md-nav__link">
    CitiesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dataimportscontroller" class="md-nav__link">
    DataImportsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#organisationscontroller" class="md-nav__link">
    OrganisationsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnercategoriescontroller" class="md-nav__link">
    PartnerCategoriesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preferencegroupscontroller" class="md-nav__link">
    PreferenceGroupsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questionscontroller" class="md-nav__link">
    QuestionsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#releasescontroller" class="md-nav__link">
    ReleasesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rolescontroller" class="md-nav__link">
    RolesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#videoscontroller" class="md-nav__link">
    VideosController
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Admin</h1>

<h2 id="articlesphotoscontroller"><strong>Articles::PhotosController</strong></h2>
<p>The Admin::Articles::PhotosController is a controller in the Admin namespace that is subclassed from Admin::BaseController.</p>
<p>The find_article method is called as a before_action before any action in the controller. This method sets the @article instance variable to the Article with the id parameter passed in the request.</p>
<p>The create action creates a new Photo associated with the @article and sets it to the @photo instance variable. If the @photo is successfully saved, it renders the @photo in JSON format with a status of :created. If the @photo fails to save, it renders the @photo in JSON format with a status of :unprocessable_entity.</p>
<p>The find_article method is a private method that finds the Article with the id parameter passed in the request and sets it to the @article instance variable.</p>
<p>The photo_params method is a private method that returns a strong parameter for the :photo attribute, allowing the :image attribute to be set.</p>
<h2 id="categoriesreordercontroller"><strong>Categories::ReorderController</strong></h2>
<p>The Admin::Categories::ReorderController is a controller for the administration section of the application that is responsible for reordering categories.</p>
<p>Functions and routes handled: This controller only has one function, the update action, which is responsible for updating the position of categories based on the order parameter passed in the request. This action can be accessed via the /admin/categories/reorder route.</p>
<p>Models interacted with: This controller interacts with the Category model in order to update the position of categories.</p>
<p>Error conditions: If the order parameter is not provided in the request, the controller will return a 400 Bad Request error.</p>
<p>Examples of usage: This controller might be used to allow administrators to rearrange the order of categories displayed on the frontend of the application. For example, a request to /admin/categories/reorder with the following order parameter:</p>
<pre><code>{
"order": [
    { "id": 1, "position": 2 },
    { "id": 2, "position": 1 },
    { "id": 3, "position": 3 }
]
}
</code></pre>
<p>Would result in the first category being moved to the second position, the second category being moved to the first position, and the third category remaining in the third position.</p>
<h2 id="partnercategoriesreordercontroller"><strong>PartnerCategories::ReorderController</strong></h2>
<p>The Admin::PartnerCategories::ReorderController is a subclass of the Admin::BaseController and is responsible for reordering PartnerCategory models.</p>
<p>The controller defines a single action, update, which is called when a PATCH request is made to the corresponding route.</p>
<p>The update action reorders the PartnerCategory models based on the order parameter passed in the request. It does this by iterating through each element of the order hash, finding the corresponding PartnerCategory model using the id value, and updating its position attribute with the position value from the hash.</p>
<p>Finally, the action sends an :ok response to the client.</p>
<p>This controller interacts with the PartnerCategory model.</p>
<p>An error condition would occur if the id value in the order parameter does not correspond to a valid PartnerCategory model. In this case, a ActiveRecord::RecordNotFound error would be raised.</p>
<p>An example of usage of this controller would be a request to the /admin/partner_categories/reorder route with a PATCH method, passing an order parameter with the desired reordering of PartnerCategory models.</p>
<h2 id="staffadminscontroller"><strong>Staff::AdminsController</strong></h2>
<p>The Admin::Staff::AdminsController is a subclass of Admin::BaseController which is in the Admin module.
This controller has several actions: index, new, create, edit, update, and destroy.</p>
<p>The index action displays a paginated list of admins belonging to a specific organisation. This is done by calling 
@organisation.admins.page(params[:page]).</p>
<p>The new action creates a new Admin object which is associated with the specified organisation.</p>
<p>The create action creates a new Admin object using the admin_params method to strong params the request. If the object is saved successfully, the user is redirected to the list of admins for the organisation with a success message. If not, the user is shown the new form again.
The edit action displays a form for editing the specified Admin object.</p>
<p>The update action updates the specified Admin object using the admin_params method to strong params the request. If the update is successful, the user is redirected to the list of admins for the organisation with a success message. If not, the user is shown the edit form again.</p>
<p>The destroy action destroys the specified Admin object and redirects the user to the list of admins for the organisation with a success message.</p>
<p>The find_organisation method sets the @organisation instance variable by finding an Organisation object using the params[:organisation_id].</p>
<p>The find_admin method sets the @admin instance variable by finding an Admin object belonging to the @organisation using the params[:id].</p>
<p>The admin_params method is used to strong params the request and only allows the specified parameters to be passed through.</p>
<p>The permitted_params method specifies the list of allowed parameters.</p>
<h2 id="vistaadminsconfirmationscontroller"><strong>VistaAdmins::ConfirmationsController</strong></h2>
<p>The Admin::VistaAdmins::ConfirmationsController is a subclass of Devise::ConfirmationsController and is responsible for handling confirmation related actions for vista admins.</p>
<p>The update action handles updating the password for an unconfirmed vista admin with a confirmation token. If the vista admin's password is successfully set, the vista admin is confirmed and redirected to the sign in page. If the password is invalid or the vista admin has already set a password, the vista admin is shown the confirmation page again with error messages.</p>
<p>The show action displays the confirmation page for an unconfirmed vista admin with a confirmation token. If the vista admin has already set a password, the vista admin is confirmed and redirected to the sign in page. If the vista admin has not set a password, the vista admin is shown the confirmation page with a form to set a password.</p>
<p>The with_unconfirmed_confirmable method finds the vista admin with the given confirmation token or initializes a new vista admin with an error if the confirmation token is invalid.</p>
<p>The do_show method sets instance variables and renders the confirmation page.</p>
<p>The do_confirm method confirms the vista admin and redirects the vista admin to the sign in page.</p>
<h2 id="articlescontroller"><strong>ArticlesController</strong></h2>
<p>The Admin::ArticlesController is a subclass of the Admin::BaseController and is used to manage articles in the application.</p>
<p>The controller has several actions: index, new, show, edit, update, and destroy. The index action is used to display a paginated list of articles, the new action is used to create a new article, the show action displays a single article, the edit action allows for editing an article, the update action updates an article, and the destroy action deletes an article.</p>
<p>The controller interacts with the Article model and uses the has_scope method to add a search scope.
The update action will render the edit template if the update to the article was unsuccessful. The destroy action will redirect to the index action with a success message if the article was successfully deleted.</p>
<p>The controller uses strong parameters to permit the title, content, publish_at, header_image_attributes, and content_category_ids attributes for the article.</p>
<p>An example of usage could be an admin wanting to delete an article: they would navigate to the show page for the article and click the delete button which would send a DELETE request to the destroy action and delete the article from the database.</p>
<h2 id="basecontroller"><strong>BaseController</strong></h2>
<p>The Admin::BaseController is a base controller for all controllers in the Admin namespace. It is a subclass of the ApplicationController and includes various before and after actions as well as a rescue from block.</p>
<p>Functions and routes handled:
This controller does not handle any functions or routes directly. It only provides shared functionality and configurations for controllers within the Admin namespace.</p>
<p>Models interacted with:
This controller interacts with the VistaAdmin model through the current_vista_admin method, which returns the currently logged in VistaAdmin. It also interacts with the Raven and PaperTrail gems to set context and track changes, respectively.</p>
<p>Error conditions:
This controller includes a rescue from block to handle the Pundit::NotAuthorizedError error. When this error is raised, the not_authorized private method is called, which sets a flash message and redirects to the admin root path.</p>
<p>Examples of usage:
This controller is intended to be used as a base for controllers within the Admin namespace. It provides shared functionality and configurations for these controllers, such as authentication, error handling, and change tracking. An example of a controller that extends from this controller is the Admin::ArticlesController.</p>
<h2 id="branchescontroller"><strong>BranchesController</strong></h2>
<p>Admin::BranchesController is a controller for handling the creation, updating, and deleting of branches. It is a subclass of the Admin::BaseController, which provides some additional functionality such as authentication and error handling. This controller is only accessible to authenticated vista_admins.</p>
<p>Functions and routes handled:</p>
<p>This controller handles the following routes:</p>
<p>GET /admin/organisations/:organisation_id/business_units/:business_unit_id/branches: This route is used to display a paginated list of branches belonging to a specific business unit.</p>
<p>GET /admin/organisations/:organisation_id/business_units/:business_unit_id/branches/new: This route is used to display a form for creating a new branch.</p>
<p>POST /admin/organisations/:organisation_id/business_units/:business_unit_id/branches: This route is used to create a new branch using the form data submitted by the user.</p>
<p>GET /admin/organisations/:organisation_id/business_units/:business_unit_id/branches/:id/edit: This route is used to display a form for editing an existing branch.</p>
<p>PATCH /admin/organisations/:organisation_id/business_units/:business_unit_id/branches/:id: This route is used to update an existing branch using the form data submitted by the user.</p>
<h2 id="businessunitscontroller"><strong>BusinessUnitsController</strong></h2>
<p>The Admin::BusinessUnitsController is a subclass of Admin::BaseController and is responsible for handling business unit related actions for the admin panel.</p>
<p>Functions: index, show, new, edit, create, update, destroy</p>
<p>Routes handled:
GET /admin/organisations/:organisation_id/business_units(.:format) - index
GET /admin/organisations/:organisation_id/business_units/new(.:format) - new
POST /admin/organisations/:organisation_id/business_units(.:format) - create
GET /admin/organisations/:organisation_id/business_units/:id/edit(.:format) - edit
PATCH/PUT /admin/organisations/:organisation_id/business_units/:id(.:format) - update
DELETE /admin/organisations/:organisation_id/business_units/:id(.:format) - destroy</p>
<p>Models interacted with: Organisation, BusinessUnit</p>
<p>Error conditions: If the business unit fails to save or update, the controller will render the new or edit views with error messages. If the business unit fails to destroy, the controller will redirect to the index page with a flash message.</p>
<p>Examples of usage:
An admin navigates to the business units index page and clicks on the "New Business Unit" button to create a new business unit for a specific organisation. They fill out the form and submit it, and the controller creates a new business unit object and saves it to the database.</p>
<p>An admin navigates to the edit page for a specific business unit and clicks on the "Update Business Unit" button. The controller updates the business unit with the new data and redirects to the index page with a success message.</p>
<h2 id="categoriescontroller"><strong>CategoriesController</strong></h2>
<p>Admin::CategoriesController is a controller in the admin namespace that allows users to manage categories in the application.</p>
<p>Functions: index, show, new, edit, create, update, destroy. These functions correspond to the RESTful routes for managing categories.</p>
<p>Routes handled: '/admin/categories' (index, show, new, edit, create, update, destroy).
Models interacted with: Category.</p>
<p>Error conditions: If the category fails to save or update, the user is shown an error and returned to the form. If the category is not found when trying to show, edit, update, or destroy, the user is redirected to the index page with a flash message.</p>
<p>Examples of usage:
An admin wants to view a list of all categories: they would visit '/admin/categories' and the index function would be triggered.</p>
<p>An admin wants to create a new category: they would visit '/admin/categories/new' and the new function would be triggered. If they submit the form, the create function would be triggered to save the new category to the database.</p>
<p>An admin wants to update an existing category: they would visit '/admin/categories/:id/edit' and the edit function would be triggered. If they submit the form, the update function would be triggered to save the changes to the database.</p>
<h2 id="citiescontroller"><strong>CitiesController</strong></h2>
<p>The Admin::CitiesController is a controller for the city resource in the admin panel.
It handles the following routes: index, show, new, edit, create, update, and destroy.
It interacts with the City model and the Photo model through the city_params method.</p>
<p>Error conditions that could be encountered include invalid input for city attributes or attempting to delete a city that is in use.</p>
<p>Examples of usage include creating a new city, viewing a list of cities, updating the attributes of a city, or deleting a city.</p>
<h2 id="dataimportscontroller"><strong>DataImportsController</strong></h2>
<p>The Admin::DataImportsController is a controller for creating, viewing, and managing data imports in the administration panel.</p>
<p>Functions and routes handled:
index: displays a paginated list of data imports</p>
<p>new: displays a form for creating a new data import</p>
<p>create: creates a new data import and queues it for processing</p>
<p>show: displays the details and status of a specific data import</p>
<p>Models interacted with:
DataImport: this controller interacts with the DataImport model to create, view, and manage data imports.</p>
<p>Error conditions:
If there is an error saving the data import, the create action will re-render the form with an error message.</p>
<p>Examples of usage:
As an administrator, I can go to the /admin/data_imports route and view a list of all data imports that have been created.</p>
<p>As an administrator, I can go to the /admin/data_imports/new route and create a new data import by uploading a file and selecting categories and questions to import.</p>
<p>As an administrator, I can go to the /admin/data_imports/:id route and view the details and status of a specific data import.</p>
<h2 id="organisationscontroller"><strong>OrganisationsController</strong></h2>
<p>The Admin::OrganisationsController is a controller for managing organizations within an application.</p>
<p>It has actions for listing organizations (index), showing a single organization (show), creating a new organization (new and create), updating an existing organization (edit and update), and destroying an organization (destroy).</p>
<p>It interacts with the Organisation model to retrieve and persist data related to organizations.</p>
<p>If an organization cannot be found in the database for show, edit, update, or destroy actions, a 404 error will be raised.</p>
<p>Example usage: A user with admin privileges visits /admin/organisations to view a list of all organizations in the application. They click on the "New Organization" button and are taken to the new organization form at /admin/organisations/new. They fill out the form and submit it, creating a new organization and being redirected to the index page with a success message.</p>
<h2 id="partnercategoriescontroller"><strong>PartnerCategoriesController</strong></h2>
<p>Admin::PartnerCategoriesController is a controller in the admin namespace.</p>
<p>It is a subclass of Admin::BaseController, so it inherits behavior from that class such as authenticating the vista admin, setting the Raven context and whodunnit, and handling Pundit::NotAuthorizedError exceptions.</p>
<p>The controller has actions for listing, showing, creating, updating, and deleting partner categories.</p>
<p>It interacts with the PartnerCategory model and the Photo model through associations.</p>
<p>In the case of an error, such as validation errors when creating or updating a partner category, the user is shown an error message and the relevant form is re-rendered.</p>
<p>An example of usage would be an admin visiting /admin/partner_categories in their web browser, which would display a list of all partner categories. They could then click on a category to edit it, or click "New Category" to create a new one.</p>
<h2 id="preferencegroupscontroller"><strong>PreferenceGroupsController</strong></h2>
<p>The Admin::PreferenceGroupsController is a controller in the Admin namespace.</p>
<p>The controller has actions for managing preference groups, including:</p>
<p>index: displays a paginated list of all preference groups.
show: redirects to the edit page for the preference group.
new: displays a form for creating a new preference group.
create: creates a new preference group using the parameters from the form submission.
edit: displays a form for editing an existing preference group.
update: updates an existing preference group using the parameters from the form submission.
destroy: deletes an existing preference group.</p>
<p>The controller interacts with the PreferenceGroup model to retrieve, create, update, and delete preference groups.</p>
<p>In the case of an error during creation or update, the controller will render the new or edit templates, respectively, with error messages.</p>
<p>Example usage: visiting /admin/preference_groups in the browser will display the index page for preference groups.</p>
<p>Submitting a form on the new page will create a new preference group, and clicking the "Edit" button for a preference group on the index page will display the edit form for that preference group.</p>
<h2 id="questionscontroller"><strong>QuestionsController</strong></h2>
<p>The Admin::QuestionsController is a controller that allows an administrator to perform CRUD (create, read, update, delete) operations on Question objects.</p>
<p>The controller is accessible at the /admin/questions route and handles the following actions:
index: renders a paginated list of Question objects that can be filtered by category and kind. The list can be rendered as HTML, JSON, or JavaScript.</p>
<p>show: redirects to the edit action for the specified Question object.
new: renders a form for creating a new Question object.
create: creates a new Question object with the parameters from the form submission.
edit: renders a form for editing an existing Question object.
update: updates an existing Question object with the parameters from the form submission.
destroy: deletes an existing Question object.</p>
<p>The Question model is interacted with in all actions.
In the event of an error, such as an invalid form submission, the appropriate action will render the form again with an error message.</p>
<p>An example of usage would be an administrator visiting the /admin/questions route, filtering the list by category, and deleting a Question object.</p>
<h2 id="releasescontroller"><strong>ReleasesController</strong></h2>
<p>The Admin::ReleasesController is a controller in the admin namespace that handles actions related to releases.</p>
<p>The index action retrieves all releases and paginates them for display in the view.</p>
<p>The create action creates a new release object and responds to both HTML and JavaScript requests.</p>
<p>The destroy action deletes a specified release object.</p>
<p>The download action retrieves a specified release object and sends it to the user as a download with a JSON MIME type and an attachment disposition.</p>
<p>The controller interacts with the Release model.</p>
<p>An error could occur if a release object is not found when attempting to delete or download it.</p>
<p>Example usage: A user visits the /admin/releases path to view a list of releases, clicks a button to create a new release, clicks a delete button to remove a release, and clicks a download button to download a release.</p>
<h2 id="rolescontroller"><strong>RolesController</strong></h2>
<p>The Admin::RolesController is a controller in the administrative section of a web application that handles the creation, reading, updating, and deletion of roles in the application.</p>
<p>The controller has the following functions: index, show, new, edit, create, update, and destroy.</p>
<p>The routes handled by the controller include /roles, /roles/new, /roles/:id/edit, /roles/:id, and /roles/:id.</p>
<p>The Role model is interacted with in this controller.</p>
<p>An error condition occurs when trying to delete a role and no replacement role is specified. In this case, a JSON response with an error message is returned with a status code of 422 (Unprocessable Entity).</p>
<p>Examples of usage include visiting the /roles route to view a list of all roles, visiting the /roles/new route to create a new role, visiting the /roles/:id/edit route to edit an existing role, and visiting the /roles/:id route to view a specific role.</p>
<h2 id="videoscontroller"><strong>VideosController</strong></h2>
<p>The Admin::VideosController is a controller for the administration panel that allows admins to manage videos.</p>
<p>The controller has several actions:</p>
<p>index: displays a paginated list of videos, which can be filtered by organisation and searched.
new: displays a form for creating a new video.
create: saves a new video to the database.
edit: displays a form for editing an existing video.
update: updates an existing video in the database.
destroy: deletes an existing video from the database.</p>
<p>The controller interacts with the Video model to retrieve and manipulate video data.</p>
<p>If there are any errors when creating or updating a video, the user will be shown the appropriate form with error messages.</p>
<p>Examples of usage include creating a new video, editing the details of an existing video, or deleting a video that is no longer needed.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: structure" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              structure
            </div>
          </div>
        </a>
      
      
        
        <a href="../api/" class="md-footer__link md-footer__link--next" aria-label="Next: API" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              API
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.sections", "toc.follow"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>