
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.10">
    
    
      
        <title>API - Vista Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#branchesprofilescontroller" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Vista Docs" class="md-header__button md-logo" aria-label="Vista Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Vista Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Vista Docs" class="md-nav__button md-logo" aria-label="Vista Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Vista Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Folder structure
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Functions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Functions" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Functions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../function/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../function/admin/" class="md-nav__link">
        admin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../function/partner/" class="md-nav__link">
        partners
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Controller
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Controller" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Controller
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../admin/" class="md-nav__link">
        Admin
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        API
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#branchesprofilescontroller" class="md-nav__link">
    Branches::ProfilesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchesstaffcontroller" class="md-nav__link">
    Branches::StaffController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffmembersauthenticationcontroller" class="md-nav__link">
    StaffMembersAuthenticationController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffmembersconfirmationscontroller" class="md-nav__link">
    StaffMembers::ConfirmationsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffmembersinvitationscontroller" class="md-nav__link">
    StaffMembers::InvitationsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffmemberspasswordscontroller" class="md-nav__link">
    StaffMembers::PasswordsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffmemberssuspensionscontroller" class="md-nav__link">
    StaffMembers::SuspensionsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apicontroller" class="md-nav__link">
    ApiController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchescontroller" class="md-nav__link">
    BranchesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#businessunitscontroller" class="md-nav__link">
    BusinessUnitsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apicontrollerquestionscontroller" class="md-nav__link">
    ApiController::QuestionsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rolescontroller" class="md-nav__link">
    RolesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apicontroller_1" class="md-nav__link">
    ApiController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1managementauthenticationcontroller" class="md-nav__link">
    Partners::V1::Management::AuthenticationController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1managementpasswordresetcontroller" class="md-nav__link">
    Partners::V1::Management::PasswordResetController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1staffauthenticationcontroller" class="md-nav__link">
    Partners::V1::Staff::AuthenticationController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1basecontroller" class="md-nav__link">
    Partners::V1::BaseController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1graphqlcontroller" class="md-nav__link">
    Partners::V1::GraphqlController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1radarcontroller" class="md-nav__link">
    Partners::V1::RadarController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1rolescontroller" class="md-nav__link">
    Partners::V1::RolesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1branchescategoriescontroller" class="md-nav__link">
    V1::Branches::CategoriesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1branchescheckincontroller" class="md-nav__link">
    V1::Branches::CheckInController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1branchesinteractionscontroller" class="md-nav__link">
    V1::Branches::InteractionsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1branchessharecontroller" class="md-nav__link">
    V1::Branches::ShareController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1categoriesignorecontroller" class="md-nav__link">
    V1::Categories::IgnoreController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1questionsanswercontroller" class="md-nav__link">
    V1::Questions::AnswerController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1synccheckcontroller" class="md-nav__link">
    V1::Sync::CheckController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1usersauthenticationcontroller" class="md-nav__link">
    V1::Users::AuthenticationController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1usersregistrationcontroller" class="md-nav__link">
    V1::Users::RegistrationController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1basecontroller" class="md-nav__link">
    V1::BaseController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1branchescontroller" class="md-nav__link">
    V1::BranchesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1categoriescontroller" class="md-nav__link">
    V1::CategoriesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1citiescontroller" class="md-nav__link">
    V1::CitiesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1contentcategoriescontroller" class="md-nav__link">
    V1::ContentCategoriesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1devicescontroller" class="md-nav__link">
    V1::DevicesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1feedcontroller" class="md-nav__link">
    V1::FeedController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1mecontroller" class="md-nav__link">
    V1::MeController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1memberrequestscontroller" class="md-nav__link">
    V1::MemberRequestsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1moodcontroller" class="md-nav__link">
    V1::MoodController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1notificationscontroller" class="md-nav__link">
    V1::NotificationsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1passwordresetscontroller" class="md-nav__link">
    V1::PasswordResetsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1profilescontroller" class="md-nav__link">
    V1::ProfilesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1qrcontroller" class="md-nav__link">
    V1::QrController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1questionscontroller" class="md-nav__link">
    V1::QuestionsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1releasescontroller" class="md-nav__link">
    V1::ReleasesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1statuscontroller" class="md-nav__link">
    V1::StatusController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1synccontroller" class="md-nav__link">
    V1::SyncController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1useranswerscontroller" class="md-nav__link">
    V1::UserAnswersController
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../partner/" class="md-nav__link">
        Partner
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Route
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Route" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Route
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../route/" class="md-nav__link">
        Index
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Models
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Models" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Models
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/concern/" class="md-nav__link">
        concerns
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/personality/" class="md-nav__link">
        personality
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../models/version/" class="md-nav__link">
        version
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Graphql
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Graphql" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Graphql
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../graphql/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../graphql/resolver/" class="md-nav__link">
        resolver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../graphql/type/" class="md-nav__link">
        type
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Channel
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Channel" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Channel
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../channel/" class="md-nav__link">
        structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../channel/application_cable/" class="md-nav__link">
        app_controller
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#branchesprofilescontroller" class="md-nav__link">
    Branches::ProfilesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchesstaffcontroller" class="md-nav__link">
    Branches::StaffController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffmembersauthenticationcontroller" class="md-nav__link">
    StaffMembersAuthenticationController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffmembersconfirmationscontroller" class="md-nav__link">
    StaffMembers::ConfirmationsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffmembersinvitationscontroller" class="md-nav__link">
    StaffMembers::InvitationsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffmemberspasswordscontroller" class="md-nav__link">
    StaffMembers::PasswordsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#staffmemberssuspensionscontroller" class="md-nav__link">
    StaffMembers::SuspensionsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apicontroller" class="md-nav__link">
    ApiController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#branchescontroller" class="md-nav__link">
    BranchesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#businessunitscontroller" class="md-nav__link">
    BusinessUnitsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apicontrollerquestionscontroller" class="md-nav__link">
    ApiController::QuestionsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rolescontroller" class="md-nav__link">
    RolesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apicontroller_1" class="md-nav__link">
    ApiController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1managementauthenticationcontroller" class="md-nav__link">
    Partners::V1::Management::AuthenticationController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1managementpasswordresetcontroller" class="md-nav__link">
    Partners::V1::Management::PasswordResetController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1staffauthenticationcontroller" class="md-nav__link">
    Partners::V1::Staff::AuthenticationController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1basecontroller" class="md-nav__link">
    Partners::V1::BaseController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1graphqlcontroller" class="md-nav__link">
    Partners::V1::GraphqlController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1radarcontroller" class="md-nav__link">
    Partners::V1::RadarController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#partnersv1rolescontroller" class="md-nav__link">
    Partners::V1::RolesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1branchescategoriescontroller" class="md-nav__link">
    V1::Branches::CategoriesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1branchescheckincontroller" class="md-nav__link">
    V1::Branches::CheckInController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1branchesinteractionscontroller" class="md-nav__link">
    V1::Branches::InteractionsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1branchessharecontroller" class="md-nav__link">
    V1::Branches::ShareController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1categoriesignorecontroller" class="md-nav__link">
    V1::Categories::IgnoreController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1questionsanswercontroller" class="md-nav__link">
    V1::Questions::AnswerController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1synccheckcontroller" class="md-nav__link">
    V1::Sync::CheckController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1usersauthenticationcontroller" class="md-nav__link">
    V1::Users::AuthenticationController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1usersregistrationcontroller" class="md-nav__link">
    V1::Users::RegistrationController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1basecontroller" class="md-nav__link">
    V1::BaseController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1branchescontroller" class="md-nav__link">
    V1::BranchesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1categoriescontroller" class="md-nav__link">
    V1::CategoriesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1citiescontroller" class="md-nav__link">
    V1::CitiesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1contentcategoriescontroller" class="md-nav__link">
    V1::ContentCategoriesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1devicescontroller" class="md-nav__link">
    V1::DevicesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1feedcontroller" class="md-nav__link">
    V1::FeedController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1mecontroller" class="md-nav__link">
    V1::MeController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1memberrequestscontroller" class="md-nav__link">
    V1::MemberRequestsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1moodcontroller" class="md-nav__link">
    V1::MoodController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1notificationscontroller" class="md-nav__link">
    V1::NotificationsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1passwordresetscontroller" class="md-nav__link">
    V1::PasswordResetsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1profilescontroller" class="md-nav__link">
    V1::ProfilesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1qrcontroller" class="md-nav__link">
    V1::QrController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1questionscontroller" class="md-nav__link">
    V1::QuestionsController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1releasescontroller" class="md-nav__link">
    V1::ReleasesController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1statuscontroller" class="md-nav__link">
    V1::StatusController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1synccontroller" class="md-nav__link">
    V1::SyncController
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v1useranswerscontroller" class="md-nav__link">
    V1::UserAnswersController
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>API</h1>

<h2 id="branchesprofilescontroller"><strong>Branches::ProfilesController</strong></h2>
<p>The ProfilesController is a controller within the Branches module, which provides an API for creating and managing profiles for branches within a business unit.</p>
<p>Functions and routes handled:</p>
<p>request: Handles a request to create a new profile for a given branch.</p>
<p>Routes:
POST /api/admin/units/:unit_id/branches/:branch_id/profiles/request: create a new profile request for a given branch.</p>
<p>Models interacted with:
ProfileRequest: a model representing a request for a new profile for a branch.</p>
<p>BusinessUnit: a model representing a business unit.</p>
<p>Branch: a model representing a branch within a business unit.</p>
<p>Error conditions:
If the user is not authorized to create a new profile request, a 401 Unauthorized error is returned.
If the request to create a new profile fails, a 422 Unprocessable Entity error is returned.</p>
<p>Examples of usage:
A client could send a POST request to /api/admin/units/123/branches/456/profiles/request with an authenticated request to create a new profile request for the branch with ID 456 within the business unit with ID 123.</p>
<h2 id="branchesstaffcontroller"><strong>Branches::StaffController</strong></h2>
<p>The Branches::StaffController is a controller within the admin panel of the application, and is responsible for managing staff members at a specific branch within a business unit.</p>
<p>This controller handles the following routes:
GET /api/admin/units/:unit_id/branches/:branch_id/staff: This route returns a list of staff members at the specified branch.
POST /api/admin/units/:unit_id/branches/:branch_id/staff: This route assigns a staff member to the specified branch.
DELETE /api/admin/units/:unit_id/branches/:branch_id/staff: This route removes a staff member from the specified branch.</p>
<p>This controller interacts with the following models:
StaffMember
BusinessUnit</p>
<p>Error conditions:
If the specified staff member or business unit cannot be found, this controller will return a 404 status code.</p>
<p>If the request to create or destroy a staff assignment fails, this controller will return a 422 status code.</p>
<p>Examples of usage:
A request to GET /api/admin/units/1/branches/2/staff will retrieve a list of staff members at branch 2 within business unit 1.</p>
<p>A request to POST /api/admin/units/1/branches/2/staff with a staff member ID in the request body will assign the staff member to branch 2 within business unit 1.</p>
<p>A request to DELETE /api/admin/units/1/branches/2/staff with a staff member ID in the request body will remove the staff member from branch 2 within business unit 1.</p>
<h2 id="staffmembersauthenticationcontroller"><strong>StaffMembersAuthenticationController</strong></h2>
<p>Description: The AuthenticationController is responsible for handling staff member authentication requests. It is a part of the StaffMembers namespace, and is subclassed from ApiController.</p>
<p>Functions and routes handled: The controller has a single action, create, which is used to handle staff member login requests. The create action is routed at /api/admin/staff_members/authentication.</p>
<p>Models interacted with: The controller interacts with the StaffMember model.</p>
<p>Error conditions: If the StaffMember::Authenticate command is not successful, an error message is returned to the client. If the staff member's account has been suspended, an unauthorized error message is returned.
Examples of usage: A client can send a POST request to /api/admin/staff_members/authentication with email and password params to attempt to log in a staff member. If the login is successful, the client will receive a JSON response with an authentication token, the staff member's organisation name, and the staff member's user type. If the login is unsuccessful, an error message will be returned to the client.</p>
<h2 id="staffmembersconfirmationscontroller"><strong>StaffMembers::ConfirmationsController</strong></h2>
<p>This is a controller for the API of the admin panel of a system that manages staff members.</p>
<p>It is in the StaffMembers namespace and is called ConfirmationsController.</p>
<p>It is a subclass of ApiController and therefore inherits behavior from it.</p>
<p>It has a before_action hook that skips the authorization step for all actions in this controller.</p>
<p>It has a single action, update, which is used to confirm a staff member's account.</p>
<p>It first uses the with_unconfirmed_confirmable method to find the staff member to be confirmed, using the confirmation_token field in the staff_member params. If the staff member is found and is unconfirmed, it proceeds with the confirmation process.</p>
<p>If the staff member has no password, it attempts to set the password with the provided password and password_confirmation params. If the password is valid and the confirmation matches, it calls the do_confirm method.</p>
<p>If the staff member has a password, it renders an error message saying that the account is already confirmed.</p>
<p>If there are errors in the confirmation process, it renders those errors in the JSON response.</p>
<p>The <code>do_confirm</code> method confirms the staff member and renders a JSON response saying the account was confirmed.
The <code>render_errors</code> method renders a JSON response with the provided errors.
The <code>staff_member_params</code> method is a private method that returns a strong parameters hash for the <code>staff_member</code> params, allowing only the <code>password</code>, <code>password_confirmation</code>, and <code>token</code> attributes to be passed.</p>
<h2 id="staffmembersinvitationscontroller"><strong>StaffMembers::InvitationsController</strong></h2>
<p>The StaffMembers::InvitationsController is a controller in the Api namespace that is responsible for handling invitation-related actions for staff members. It is a subclass of ApiController, which provides it with a set of shared behaviors and methods.</p>
<p>This controller has one action: update. This action is responsible for resending a confirmation email to a staff member. It is triggered when a request is made to the /api/admin/staff_members/:staff_id/invitation route with the PATCH HTTP verb.</p>
<p>Before the update action is called, the find_staff_member method is called to set the @staff_member instance variable to the staff member with the ID specified in the request params. This instance variable is used in the action to determine which staff member to send the confirmation email to.</p>
<p>The update action first calls the authorize method to ensure that the current user is authorized to invite the specified staff member. If the user is not authorized, a Pundit::NotAuthorizedError will be raised.</p>
<p>If the @staff_member has already been confirmed, the action will render a JSON response with an error message and a 400 status code. Otherwise, it will call the resend_confirmation_instructions method on the @staff_member to send the confirmation email and render a JSON response with a success message and a 201 status code.</p>
<p>Example usage of this controller would be a request made by an administrator to resend a confirmation email to a staff member who has not yet confirmed their account. The administrator would send a PATCH request to the /api/admin/staff_members/:staff_id/invitation route with the ID of the staff member in the URL, and the controller would handle resending the confirmation email and responding with the appropriate JSON response.</p>
<h2 id="staffmemberspasswordscontroller"><strong>StaffMembers::PasswordsController</strong></h2>
<p>The StaffMembers::PasswordsController is an API controller that is responsible for handling password reset requests for staff members.</p>
<p>This controller handles the following routes:</p>
<p>POST /api/admin/staff_members/passwords: This route allows a user to request a password reset by providing their email address. If a staff member with the provided email exists, a password reset email will be sent to them.
PATCH /api/admin/staff_members/passwords: This route allows a user to update their password by providing their password reset token and their new password. If a staff member with a valid reset password token is found, their password will be reset to the provided value.</p>
<p>This controller interacts with the StaffMember model.</p>
<p>Some possible error conditions that could be encountered in this controller include:
If a user tries to request a password reset with an email that does not belong to any staff member, an error will be returned indicating that no user was found for the request.</p>
<p>If a user tries to reset their password with an invalid token, an error will be returned indicating that the password reset token is invalid.</p>
<p>If a user tries to reset their password with a token that has expired, an error will be returned indicating that the password reset token has expired.</p>
<p>If a user tries to reset their password with a token that has already been used, an error will be returned indicating that the password reset token has already been used.</p>
<p>If a user tries to reset their password with mismatching password and password confirmation values, an error will be returned indicating that the password and password confirmation do not match.</p>
<p>Some examples of usage for this controller include:
A user forgot their password and wants to reset it:
The user navigates to the password reset page and enters their email address.</p>
<p>The user clicks the "Send password reset instructions" button.</p>
<p>A request is sent to the POST /api/admin/staff_members/passwords route with the user's email address in the request body.</p>
<p>If a staff member with the provided email exists, a password reset email is sent to the user.</p>
<p>A user wants to reset their password using the password reset link sent to their email:</p>
<p>The user clicks the password reset link in the email they received.
The user is taken to the password reset page and enters their new password.
The user clicks the "Change my password" button.</p>
<p>A request is sent to the PATCH /api/admin/staff_members/passwords route with the user's password reset token and their new password in the request body.</p>
<p>If a staff member with a valid reset password token is found, their password is reset to the provided value.</p>
<h2 id="staffmemberssuspensionscontroller"><strong>StaffMembers::SuspensionsController</strong></h2>
<p>The StaffMembers::SuspensionsController is a controller in the API namespace of the application. It is meant to be used by an admin user to manage staff members within their organisation.</p>
<p>The controller has two actions: suspend and unsuspend. These actions allow an admin to suspend or unsuspend a staff member.</p>
<p>The controller interacts with the StaffMember model. It uses the StaffMember::Suspend and StaffMember::Unsuspend services to change the suspension status of a staff member.</p>
<p>If either of the actions is successful, the controller will render the updated staff member object with a status code of 201. If there is an error, the staff member object will be rendered with a status code of 422.</p>
<p>Examples of usage include sending a POST request to /api/admin/staff_members/:staff_id/suspend to suspend a staff member or a POST request to /api/admin/staff_members/:staff_id/unsuspend to unsuspend a staff member.</p>
<h2 id="apicontroller"><strong>ApiController</strong></h2>
<p>The ApiController is a controller for the API of the administrative panel of the application. It is a base class for other controllers in the Api::Admin namespace.</p>
<p>The controller includes the ActionController::Serialization module, which allows it to serialize objects to be sent as responses to API requests. It also sets the serialization_scope to be the view_context object, which allows serialized objects to have access to helper methods from the view.</p>
<p>The controller has several before_action filters:</p>
<p>authenticate: calls the authenticate method to authenticate the user based on their authentication token.</p>
<p>set_paper_trail_whodunnit: sets the whodunnit value for the paper_trail gem, which tracks changes to models in the application.</p>
<p>verify_authorized: verifies that authorization has been performed for all actions except the index action.</p>
<p>verify_policy_scoped: verifies that policy scoping has been performed for the index action.</p>
<p>The controller has several rescue_from clauses that specify how to handle certain types of exceptions:
ActionController::RoutingError, AbstractController::ActionNotFound, ActiveRecord::RecordNotFound: render a 404 response with the message "resource not found".</p>
<p>ActionController::ParameterMissing, ActiveModel::ForbiddenAttributesError: render a 400 response with the message "bad request".</p>
<p>Pundit::NotAuthorizedError: render a 403 response with the message "forbidden".</p>
<p>The controller has several methods:
pundit_user: returns the current user, which is used by the pundit gem to determine the user for whom authorization is being checked.</p>
<p>user_for_paper_trail: returns the ID of the current user, or "Missing" if the current user is not present. This value is used by the paper_trail gem to set the whodunnit value for tracking changes to models.</p>
<p>render_404: renders a 404 response with the message "resource not found".
render_403: renders a 403 response with the message "forbidden".
render_401: renders a 401 response with the message "Invalid credentials".
render_400: renders a 400 response with the message "bad request".</p>
<p>authenticate: authenticates the user based on their authentication token. If the authentication is successful, it sets the @current_user instance variable to the authenticated user. If the authentication fails, it returns nil.</p>
<p>authenticate_token: uses the authenticate_with_http_token method to authenticate the user based on their authentication token. If the authentication is successful, it returns the authenticated user. If the authentication fails, it returns nil.</p>
<h2 id="branchescontroller"><strong>BranchesController</strong></h2>
<p>The BranchesController is a controller for managing branches in the API for an administrator.</p>
<p>The routes handled by this controller include index, show, create, update, and destroy for branches.</p>
<p>The models interacted with by this controller include the BusinessUnit model and the Branch model.</p>
<p>Error conditions that are handled by this controller include routing errors, action not found errors, record not found errors, parameter missing errors, forbidden attributes errors, and not authorized errors.</p>
<p>Examples of usage for this controller include retrieving a list of all branches for a specific business unit, retrieving details for a specific branch, creating a new branch, updating an existing branch, and deleting an existing branch.</p>
<h2 id="businessunitscontroller"><strong>BusinessUnitsController</strong></h2>
<p>The BusinessUnitsController is a controller within the Api::Admin namespace that is responsible for handling requests related to business units.</p>
<p>This controller has the following functions: index, show, create, update, and destroy. These functions correspond to the following routes:
GET /api/admin/business_units: Returns a list of all business units for the current user's organization.
GET /api/admin/business_units/:id: Returns the specified business unit.
POST /api/admin/business_units: Creates a new business unit.
PUT /api/admin/business_units/:id: Updates the specified business unit.
DELETE /api/admin/business_units/:id: Deletes the specified business unit.</p>
<p>This controller interacts with the BusinessUnit model.</p>
<p>In the event of an error, this controller will render a JSON response with an HTTP status code of 422 (Unprocessable Entity) or 404 (Not Found).</p>
<p>An example of usage for this controller would be a request to create a new business unit, which could be done with a POST request to the /api/admin/business_units route, with a JSON payload containing the attributes for the new business unit.</p>
<p>PP</p>
<p>The CategoriesController is a controller in the Api::Admin namespace.</p>
<p>It handles the following routes:
GET /api/admin/categories: retrieves a list of all categories.
GET /api/admin/categories/:id: retrieves a specific category by its id.
POST /api/admin/categories: creates a new category.
PUT /api/admin/categories/:id: updates a specific category by its id.
DELETE /api/admin/categories/:id: deletes a specific category by its id.</p>
<p>The controller interacts with the Category model.</p>
<p>In the case of an error, the controller returns a status code of 422 (Unprocessable Entity) for failed create and update actions, or a status code of 404 (Not Found) for failed show and delete actions.</p>
<p>Example usage:
To retrieve a list of all categories: GET /api/admin/categories
To create a new category: POST /api/admin/categories with the desired category data in the request body.
To update an existing category: PUT /api/admin/categories/:id with the updated category data in the request body.
To delete an existing category: DELETE /api/admin/categories/:id</p>
<h2 id="apicontrollerquestionscontroller"><strong>ApiController::QuestionsController</strong></h2>
<p>This is the QuestionsController for the API in the Admin namespace. It is a subclass of ApiController.</p>
<p>This controller has actions for index, show, create, update, and destroy for Question models.</p>
<p>The before_action callback find_question is called before all actions except index and create, and it sets an instance variable @question to the Question with the id specified in the request parameters.</p>
<p>The index action sets the instance variable @questions to the collection of all Questions, and renders a JSON response of this collection if the collection is stale.</p>
<p>The show action authorizes the @question instance variable and renders a JSON response of it if it is stale.</p>
<p>The create action creates a new Question from the question_params in the request and authorizes it. If the Create operation is successful, it renders a JSON response of the new Question with a status of 201. If the operation is not successful, it renders a JSON response of the Question with a status of 422.</p>
<p>The update action authorizes the @question instance variable and, if the Update operation is successful, renders a JSON response of it with a status of 200. If the operation is not successful, it renders a JSON response of the Question with a status of 422.</p>
<p>The destroy action authorizes the @question instance variable and, if the Destroy operation is successful, renders an empty response with a status of 204. If the operation is not successful, it renders an empty</p>
<h2 id="rolescontroller"><strong>RolesController</strong></h2>
<p>RolesController is an API controller in the "Api::Admin" namespace.</p>
<p>It has actions for index, show, create, update, and destroy.</p>
<p>It sets the role instance variable before the show, update, and destroy actions using the set_role method. It also finds a new role to replace the one being destroyed using the find_new_role method before the destroy action.</p>
<p>It uses the policy_scope method to set the @roles and @new_role instance variables to the appropriate records from the Role model.</p>
<p>It authorizes the current user for each action using the authorize method.</p>
<p>It calls the Role::Create, Role::Update, and Role::Destroy services for the corresponding actions.</p>
<p>It renders a JSON response for each action, with a status code of 201 for create, 200 for update, 204 for destroy, 422 for unsuccessful actions, and 200 for index and show.</p>
<p>The create and update actions require strong parameters, which are specified in the role_params method.</p>
<p>The destroy action assigns the new role to all staff members who currently have the role being destroyed, using the assign_new_role method.</p>
<h2 id="apicontroller_1"><strong>ApiController</strong></h2>
<p>StaffMembersController is a subclass of ApiController which provides authentication and authorization for the actions within the controller.</p>
<p>This controller has actions for index, show, create, update, and destroy for staff members.</p>
<p>The index action retrieves a list of all staff members in the system, authorizes the action, and then renders a JSON response of the staff members if the response is not stale.</p>
<p>The show action retrieves a specific staff member, authorizes the action, and then renders a JSON response of the staff member if the response is not stale.</p>
<p>The create action creates a new staff member with the provided parameters and then renders a JSON response of the staff member with a status of 201 if the creation was successful, or a status of 422 if the creation failed.</p>
<p>The update action updates a specific staff member with the provided parameters and then renders a JSON response of the updated staff member with a status of 200 if the update was successful, or a status of 422 if the update failed.</p>
<p>The destroy action destroys a specific staff member and then returns a status of 204 if the destroy action was successful, or a status of 422 if the destroy action failed.</p>
<p>The controller also has private methods for finding a specific staff member and for allowing certain parameters to be passed based on the current user.</p>
<p>The models interacted with in this controller include StaffMember, Role, and BusinessUnit.</p>
<p>Error conditions that may be encountered include the staff member not being found, invalid parameters being passed, and the current user not being authorized to perform the action.</p>
<h2 id="partnersv1managementauthenticationcontroller"><strong>Partners::V1::Management::AuthenticationController</strong></h2>
<p>The AuthenticationController is a controller for managing authentication for partners in the V1 API.</p>
<p>It handles the following routes:
POST /api/partners/v1/management/authentication: creates a new session for a staff member.</p>
<p>It interacts with the following models:
StaffMember: authenticates the staff member with the given email and password.</p>
<p>AuthenticationToken: creates and returns a new authentication token for the authenticated staff member.</p>
<p>Error conditions:
If the staff member cannot be authenticated, it will render an error with a status of 401.</p>
<p>Examples of usage:
A partner makes a POST request to /api/partners/v1/management/authentication with the appropriate email and password in the request body. If the staff member is successfully authenticated, it will return a JSON object containing the authentication token and an analytics token.</p>
<h2 id="partnersv1managementpasswordresetcontroller"><strong>Partners::V1::Management::PasswordResetController</strong></h2>
<p>The PasswordResetController is a controller in the Api::Partners::V1::Management namespace.</p>
<p>It inherits from Api::Partners::V1::BaseController.</p>
<p>It skips the authenticate and find_branch filters for the create and update actions, respectively.</p>
<p>The create action sends a password reset email to the user with the specified email address if the user is found.</p>
<p>The update action resets the password for the user with the specified reset token and updates the user's password if the token is valid.</p>
<p>The reset_params method combines the reset_password_token and other user parameters passed in the request.</p>
<p>The unlockable? method checks if the user has the unlock_access! and unlock_strategy_enabled? methods and if the email unlock strategy is enabled for the user.</p>
<p>The user_params method permits the email, password, password_confirmation, and token parameters.</p>
<h2 id="partnersv1staffauthenticationcontroller"><strong>Partners::V1::Staff::AuthenticationController</strong></h2>
<p>The AuthenticationController is a controller within the Api::Partners::V1::Staff namespace.</p>
<p>The controller is responsible for handling the creation of authentication tokens for staff members.</p>
<p>The create action is responsible for authenticating a staff member based on their employee ID and pin. If the authentication is successful, a login session is established for the staff member and an authentication token is returned in the response.</p>
<p>The create action skips the authenticate before action, which means that it does not require an authentication token to be passed in the request headers. However, it does run the authenticate_manager before action, which means that only staff members with the role of manager are able to use this action.</p>
<p>The render_error method is responsible for rendering errors in the response if the authentication fails. It uses the ActiveModel::Serializer::ErrorSerializer to serialize the errors.</p>
<p>The user_params method is a private method that permits the email and password parameters to be passed in the request. It is not used in the create action.</p>
<h2 id="partnersv1basecontroller"><strong>Partners::V1::BaseController</strong></h2>
<p>The BaseController is an abstract class that serves as the base for the other controllers in the Api::Partners::V1 namespace. It includes various before and rescue actions to handle common tasks and errors across controllers.</p>
<p>Functions and routes handled:</p>
<p>The BaseController does not handle any specific functions or routes. Instead, it provides a set of common actions that are run before or after the actions of other controllers in its namespace.
Models interacted with:</p>
<p>The BaseController does not interact with any specific models.
Error conditions and examples of usage:</p>
<p>The BaseController has a number of rescue actions that handle common errors such as routing errors, action not found errors, and record not found errors. These rescue actions render a JSON response with the appropriate status code.
An example of usage for the BaseController would be as the base class for other controllers in the Api::Partners::V1 namespace. The actions provided by the BaseController would then be run before or after the actions of the derived controllers.</p>
<h2 id="partnersv1graphqlcontroller"><strong>Partners::V1::GraphqlController</strong></h2>
<p>The GraphqlController is a controller within the Api::Partners::V1 namespace. It is responsible for handling GraphQL requests.</p>
<p>This controller has a single action, execute, which is responsible for handling GraphQL queries and mutations.</p>
<p>The execute action first processes the request parameters, extracting the variables, query, and operationName from the request.</p>
<p>It then constructs a context hash containing information about the current request, such as the token_context, current_branch, current_branch_id, current_organisation, current_user, and current_role.</p>
<p>The execute action then passes the extracted query, variables, context, and operation_name to the execute method of the VistaPlatformSchema class. This class is a GraphQL schema which defines the GraphQL types and resolvers for the application.</p>
<p>The result of the execute method is then rendered as a JSON response to the client.</p>
<p>The ensure_hash private method is used to convert the variables parameter to a hash. If the variables parameter is a JSON string, it is parsed into a hash. If the variables parameter is already a hash, it is returned as is. If the variables parameter is nil, an empty hash is returned.</p>
<p>The permitted_params private method is used to allow all request parameters. It is currently commented out as it does not work properly with a nested variables</p>
<h2 id="partnersv1radarcontroller"><strong>Partners::V1::RadarController</strong></h2>
<p>The RadarController is a controller within the Api::Partners::V1 module in a Ruby on Rails application.</p>
<p>This controller has a single action, index, which is used to search for users within a specified radius of a given latitude and longitude using the Radar.io API.</p>
<p>The index action uses the RestClient gem to make a GET request to the Radar.io API, passing in the necessary authorization, parameters (near, radius, limit), and a block specifying the request headers.</p>
<p>The index action then renders the response from the API as JSON.</p>
<p>The index action is accessed via the /api/partners/v1/radar route.</p>
<p>This controller does not interact with any models.</p>
<p>An error condition that could occur in this controller is if the Radar.io API returns an error status code.</p>
<p>An example of usage for this controller would be to make a GET request to the /api/partners/v1/radar route with the necessary query parameters (lat, lon, radius).</p>
<h2 id="partnersv1rolescontroller"><strong>Partners::V1::RolesController</strong></h2>
<p>RolesController is a controller in the Api::Partners::V1 module.</p>
<p>The RolesController handles the index route, which allows users to view a list of roles.</p>
<p>The RolesController interacts with the Role model.</p>
<p>There are no error conditions specified in the controller.</p>
<p>An example of usage for this controller would be a request to api/partners/v1/roles to view a list of roles.</p>
<h2 id="v1branchescategoriescontroller"><strong>V1::Branches::CategoriesController</strong></h2>
<p>The CategoriesController is a controller in the Api::V1::Branches namespace, under the V1 version of the API.</p>
<p>This controller has a single action, index, which retrieves a paginated list of PartnerCategory objects and includes their associated photo records.</p>
<p>The index action renders the list of categories as a JSON response.</p>
<p>This controller does not interact with any models directly. It uses the PartnerCategory model to retrieve the categories.</p>
<p>There are no error conditions explicitly defined in this controller.</p>
<p>An example of usage for this controller could be a client making a GET request to the /api/v1/branches/categories route to retrieve a list of partner categories.</p>
<h2 id="v1branchescheckincontroller"><strong>V1::Branches::CheckInController</strong></h2>
<p>The CheckInController is a controller in the Api::V1::Branches namespace that is responsible for managing check-ins for a specific branch.</p>
<p>Functions and routes handled: This controller has a single action - create - which is responsible for creating a new check-in for a user. The create action is accessed via the POST /api/v1/branches/:id/check_in route.</p>
<p>Models interacted with: This controller interacts with the CheckIn and Branch models.</p>
<p>Error conditions: If the create action is unsuccessful in creating a new check-in (for example, if the provided check-in parameters are invalid), it will render a JSON response with an HTTP status of 422 (Unprocessable Entity).</p>
<p>Examples of usage: A client app can send a POST request to the /api/v1/branches/:id/check_in route with a JSON body containing the check-in parameters to create a new check-in for the user. The response will contain the newly created check-in object if successful, or an error object if unsuccessful.</p>
<h2 id="v1branchesinteractionscontroller"><strong>V1::Branches::InteractionsController</strong></h2>
<p>The InteractionsController is a controller for handling interactions within a specific branch.</p>
<p>Functions and routes handled:
This controller handles the following routes:</p>
<p>Index: returns a paginated list of interactions for the current user within a specific branch.</p>
<p>Models interacted with:
Interaction: represents a user's interaction with a specific branch.
Branch: represents a physical location where a user can check in.</p>
<p>Error conditions:
If the current user is not authenticated, the controller will return a 401 Unauthorized error. If the specified branch is not found, the controller will return a 404 Not Found error.</p>
<p>Examples of usage:</p>
<p>To retrieve a paginated list of interactions for the current user within a specific branch:
GET /api/v1/branches/:id/interactions?page=1&amp;limit=10</p>
<h2 id="v1branchessharecontroller"><strong>V1::Branches::ShareController</strong></h2>
<p>The ShareController is a controller in the Api::V1::Branches namespace.</p>
<p>The controller has three actions: create, destroy, and revoke_all.</p>
<p>The create action calls the Authorise command of the Share module, passing in the current branch, current user, and the string 'user' as arguments. If the command is successful, it returns a HTTP status code of 204. Otherwise, it returns a status code of 422.</p>
<p>The destroy action calls the Revoke command of the Share module, passing in the current branch and current user as arguments. If the command is successful, it returns a HTTP status code of 204. Otherwise, it returns a status code of 422. If an error occurs, it returns a status code of 422.</p>
<p>The revoke_all action calls the RevokeAll command of the Share module, passing in the current user as an argument. If the command is successful, it returns a HTTP status code of 204. Otherwise, it returns a status code of 422.</p>
<p>The branch method is a private method that returns the current branch by finding it using the id parameter passed in through the params hash.</p>
<h2 id="v1categoriesignorecontroller"><strong>V1::Categories::IgnoreController</strong></h2>
<p>The IgnoreController is an API controller that allows users to ignore or unignore categories.</p>
<p>Functions and routes handled: The controller has two actions, create and destroy, which handle the routes POST /api/v1/categories/:id/ignore and DELETE /api/v1/categories/:id/ignore, respectively. The create action allows a user to ignore a category, and the destroy action allows a user to unignore a category.</p>
<p>Models interacted with: The controller interacts with the Category and Ignore models.</p>
<p>Error conditions: If a category cannot be found or if there is an issue saving or destroying an ignore record, a HTTP status code of 422 (Unprocessable Entity) will be returned.</p>
<p>Examples of usage:
To ignore a category with id 1, a user could send a POST request to /api/v1/categories/1/ignore.
To unignore a category with id 1, a user could send a DELETE request to /api/v1/categories/1/ignore.</p>
<h2 id="v1questionsanswercontroller"><strong>V1::Questions::AnswerController</strong></h2>
<p>The AnswerController is an API controller that belongs to the V1 version of the API under the Questions module. It is responsible for handling actions related to answers to questions.</p>
<p>The AnswerController allows users to create and destroy answers to questions. It is also responsible for updating an answer if it already exists.</p>
<p>The AnswerController interacts with the Answer model and the Question model.</p>
<p>If an answer fails to save, the controller will render a status of 422 (unprocessable entity). If an answer is successfully destroyed, the controller will return a status of 204 (no content).</p>
<p>An example of usage for this controller is when a user wants to answer a question or remove their answer to a question. The user could send a POST request to /api/v1/questions/:id/answer with the necessary parameters to create an answer, or send a DELETE request to /api/v1/questions/:id/answer to delete the answer.</p>
<h2 id="v1synccheckcontroller"><strong>V1::Sync::CheckController</strong></h2>
<p>The CheckController provides a check for synchronization between the client and the server.</p>
<p>Functions and routes handled: The index action handles the route GET /sync/check and returns the latest updated timestamps for categories, questions, and the current user.</p>
<p>Models interacted with: The Category, Question, and User models are queried to retrieve their latest updated timestamps.</p>
<p>Error conditions: There are no known error conditions for this controller.</p>
<p>Examples of usage: A client application might send a GET request to /sync/check to determine if it needs to synchronize its local data with the server. The response from this controller can be used to determine which records need to be fetched from the server to update the client's local data.</p>
<h2 id="v1usersauthenticationcontroller"><strong>V1::Users::AuthenticationController</strong></h2>
<p>The Api::V1::Users::AuthenticationController is a controller within the V1 version of the API for interacting with user authentication.</p>
<p>This controller's primary function is to handle user login requests by authenticating the provided email and password. If the authentication is successful, the controller returns a member ID, analytics token, and authentication token to the client. If the authentication is unsuccessful, an error is returned to the client.</p>
<p>This controller does not interact with any models directly, but rather uses the User::Authenticate command to handle the authentication process.</p>
<p>Error conditions that this controller handles include:
Invalid email or password provided
User is archived</p>
<p>An example of usage for this controller could be a client app making a POST request to the /api/v1/users/authentication route with the required email and password parameters in the request body. The server would then respond with a JSON object containing the member ID, analytics token, and authentication token if the authentication is successful, or an error if it is unsuccessful.</p>
<h2 id="v1usersregistrationcontroller"><strong>V1::Users::RegistrationController</strong></h2>
<p>Api::V1::Users::RegistrationController is a controller within the Api::V1::Users module. It handles user registration.</p>
<p>The controller includes a create action that creates a new user based on the user_params passed in the request. It does this by calling the User::Register service, passing in user_params. If the service is successful, the controller returns a JSON response with the token and needsOnboarding fields. If the service is unsuccessful, the controller returns a JSON error response.</p>
<p>The controller interacts with the User model to create a new user and generate an authentication token for the user.</p>
<p>The create action is skipped for the authenticate before action, so it does not require authentication to access.</p>
<p>An example of usage would be a client sending a POST request to the /api/v1/users/registration route with email and password fields in the request body to create a new user.</p>
<h2 id="v1basecontroller"><strong>V1::BaseController</strong></h2>
<p>The Api::V1::BaseController is a base controller for the API version 1 of the application.</p>
<p>It includes ActionController::Serialization and sets serialization_scope to the view_context.</p>
<p>It has a before_action to authenticate the user and set the current_user instance variable.</p>
<p>It has rescue_from clauses to handle routing errors, missing actions, record not found errors, parameter missing errors, forbidden attribute errors, and authorization errors.</p>
<p>It has a protected method render_404 to render a 'Resource not found' message with a 404 status.
It has a protected method render_403 to render a 'Forbidden' message with a 403 status.
It has a protected method render_401 to render an 'Invalid credentials' message with a 401 status.
It has a protected method render_400 to render a 'Bad request' message with a 400 status.
It has a protected method authenticate to authenticate the user by calling authenticate_token. If authenticate_token fails, it calls render_401.
It has a protected method authenticate_token to authenticate the user by checking the HTTP token and setting the current_user instance variable.
It has a protected method set_raven_context to set the context for the error logging tool Raven.
It has a protected method pundit_user which returns the current_user.
It has a protected method user_for_paper_trail which returns the id of the current_user or 'Missing' if the current_user is not set.</p>
<h2 id="v1branchescontroller"><strong>V1::BranchesController</strong></h2>
<p>The BranchesController is a controller in the Api::V1 namespace.</p>
<p>It is a subclass of Api::V1::BaseController.</p>
<p>It uses the has_scope method provided by the HasScope module to define several scopes that can be used to filter the branches returned by the controller. These scopes include in_category, in_city, ordered_by_distance, vista_partners, and search.</p>
<p>The index action retrieves a list of branches based on the provided scopes and includes the :address, :shares, :categories, :photo, and :business_unit associations in the query. It then paginates the results using the page method provided by the kaminari gem.</p>
<p>The show action retrieves a single branch based on the provided id parameter.</p>
<p>The branch_scope private method returns either all branches or only the branches authorized for the current user, based on the value of the authorised parameter.</p>
<h2 id="v1categoriescontroller"><strong>V1::CategoriesController</strong></h2>
<p>The CategoriesController is a controller in the Api::V1 namespace that handles HTTP requests related to categories.</p>
<p>The index action handles requests for a list of categories. It uses the has_scope method to apply scoping parameters to the Category model, and then returns a paginated list of categories to the client.</p>
<p>The show action handles requests for a specific category. It uses the find_category private method to find the requested category and authorize the request using the authorize method from the Pundit gem. If the request is authorized, the action returns the requested category to the client.</p>
<p>The find_category private method finds the requested category using the Category model and the id parameter passed in the request.</p>
<p>The in_category scope is applied to the Category model when the category parameter is present in the request.</p>
<p>The stale? method is used to determine if the requested data is stale (i.e., if it has been modified since the client last requested it). If the data is stale, the action sends the data to the client. If the data is not stale, a 304 Not Modified response is returned to the client.</p>
<h2 id="v1citiescontroller"><strong>V1::CitiesController</strong></h2>
<p>The CitiesController is a class that belongs to the Api::V1 namespace and is a subclass of the Api::V1::BaseController class.</p>
<p>Functions and routes handled: The controller has an "index" action that is used to handle the "GET /cities" route. This action retrieves a paginated list of cities from the database and renders them as a JSON response.</p>
<p>Models interacted with: The CitiesController interacts with the City model to retrieve a list of cities from the database.</p>
<p>Error conditions: If the cities list is stale, a new list is retrieved from the database and rendered as a JSON response. If the cities list cannot be retrieved from the database, an error message is rendered as a JSON response.</p>
<p>Examples of usage: A client can make a GET request to the "/cities" route to retrieve a list of cities from the server. The server will then respond with a JSON object containing the list of cities.</p>
<h2 id="v1contentcategoriescontroller"><strong>V1::ContentCategoriesController</strong></h2>
<p>The ContentCategoriesController is a controller in the V1 API that is responsible for handling actions related to ContentCategory models.</p>
<p>Functions and routes handled: This controller only has one function, the index action, which is responsible for returning a list of all ContentCategory models. This action can be accessed via the /api/v1/content_categories route.</p>
<p>Models interacted with: The ContentCategoriesController interacts with the ContentCategory model to retrieve a list of all content categories.</p>
<p>Error conditions: There are no specific error conditions specified in this controller.</p>
<p>Examples of usage: An example of usage for this controller would be to make a GET request to the /api/v1/content_categories route, which would return a list of all ContentCategory models in the API's response.</p>
<h2 id="v1devicescontroller"><strong>V1::DevicesController</strong></h2>
<p>The DevicesController is responsible for handling device registration for the current user.</p>
<p>Functions and routes handled: The create action handles the creation or updating of a device for the current user. The route for this action is a POST request to '/api/v1/devices'.</p>
<p>Models interacted with: The Device model is interacted with to find or initialize a new device for the current user, and to update the device with the provided parameters.</p>
<p>Error conditions: If the device fails to be created or updated, a 422 Unprocessable Entity response is returned.</p>
<p>Examples of usage: A client app may send a POST request to '/api/v1/devices' with a JSON body containing the token and platform of the device being registered. The controller will create or update the device for the current user and return a 204 No Content response on success.</p>
<h2 id="v1feedcontroller"><strong>V1::FeedController</strong></h2>
<p>The Api::V1::FeedController is a subclass of Api::V1::BaseController and is responsible for handling requests related to the feed of content for a user.</p>
<p>The index action allows a user to retrieve a feed of articles, interactions, category updates, and videos that have been published and are relevant to the user. It uses the has_scope method to allow for filtering the results based on the updated_since parameter.</p>
<p>The controller interacts with the Article, Interaction, CategoryUpdate, and Video models to retrieve the relevant content for the feed.</p>
<p>If the updated_since parameter is not a valid datetime, the scope is returned as is.</p>
<p>If the feed can be retrieved successfully, a Feed object is created with the retrieved content and rendered as JSON in the response.</p>
<p>Example usage: A GET request is made to /api/v1/feed?updated_since=2022-01-01T00:00:00Z to retrieve the feed for a user with content that was updated since January 1st, 2022.</p>
<h2 id="v1mecontroller"><strong>V1::MeController</strong></h2>
<p>The MeController is a controller in the Api::V1 namespace that handles actions related to the currently authenticated user.</p>
<p>The show action responds with the current user's data if the data is not stale.</p>
<p>The update action updates the current user's data with the provided params and responds with the updated data if the update was successful, or with a status of 422 if the update was unsuccessful.</p>
<p>The user_params method returns a subset of the permitted attributes of the user param.</p>
<p>The permitted_attributes method returns an array of permitted attributes for the user model.</p>
<p>The transform_params_if_multipart! method modifies the params hash by transforming the keys to be underscore-separated if the request's content type is multipart/form-data. It also applies this transformation recursively to any nested hash or array values.</p>
<p>This controller has a before action that calls transform_params_if_multipart!, which modifies the params before they are used in the update action.</p>
<h2 id="v1memberrequestscontroller"><strong>V1::MemberRequestsController</strong></h2>
<p>The MemberRequestsController is for the API of the V1 version of the application and is a subclass of Api::V1::BaseController.</p>
<p>The controller handles the following routes:
Index: returns a paginated list of member requests made by the current user for a specific branch (specified by branch_id in the params). Includes member_request_type information. The list is ordered by updated_at in descending order and is scoped to the current user.</p>
<p>Show: returns a specific member request made by the current user, specified by the id in the params.</p>
<p>Create: creates a new member request made by the current user with the member_request_type_id and branch_id specified in the params, and any messages attached to the request.</p>
<p>Mark as read: marks all unread messages sent by staff members in the member request as read.</p>
<p>Send message: creates and attaches a new message to the member request, with the current user as the messageable and the body specified in the params.</p>
<p>Request details: returns the member request made by the current user that has a specific message id specified in the params.</p>
<p>The controller interacts with the MemberRequest, MemberRequestType, and MemberRequestMessage models.
In the index, show, and request_details actions, if the requested resource is not found or is stale, a 404 or 422 error is returned respectively. In the create and send message actions, if the resource is not successfully saved, a 422 error is returned.</p>
<p>Example usage: making a GET request to /api/v1/member_requests with the branch_id parameter specified in the query string would return a paginated</p>
<h2 id="v1moodcontroller"><strong>V1::MoodController</strong></h2>
<p>The MoodController is a controller within the Api::V1 namespace and is a subclass of Api::V1::BaseController.</p>
<p>The MoodController has a single action, create, which is used to create a new mood record for the current user.</p>
<p>The create action creates a new Mood record using the mood_params method to whitelist and retrieve the necessary parameters. If the Mood record is successfully saved, the action renders the @mood object in JSON format. If the save is unsuccessful, the action renders the @mood object in JSON format with a status of 422 (Unprocessable Entity).</p>
<p>The mood_params method is a private method that uses the params.require(:mood).permit(:value) syntax to whitelist and retrieve the :value parameter from the incoming request.</p>
<h2 id="v1notificationscontroller"><strong>V1::NotificationsController</strong></h2>
<p>The NotificationsController is a controller within the Api::V1 module. It is a subclass of Api::V1::BaseController.</p>
<p>The controller has two actions: index and update. The index action retrieves a paginated list of notifications for the current user, and the update action updates a single notification belonging to the current user.</p>
<p>The index action uses the Notification model to retrieve notifications for the current user and includes the object association in the query. It then renders the notifications as a JSON response.</p>
<p>The update action uses the Notification model to find a notification belonging to the current user using the params[:id] value. It then updates the notification with the notification_params and renders a JSON response with a status of 204 if the update was successful, or a status of 422 if it was not.</p>
<p>The notification_params method is a private method that whitelists the response attribute of the notification parameter.</p>
<p>The mark_all_read method is an after_action callback that marks all unread notifications in the @notifications instance variable as read. This method is only called for the index action.</p>
<p>Example usage of the NotificationsController:
A GET request to /api/v1/notifications would retrieve a paginated list of notifications for the current user and render them as a JSON response.</p>
<p>A PUT request to /api/v1/notifications/5 with a JSON body of { "notification": { "response": "accepted" } } would update the notification with ID 5 belonging to the current user and set the response attribute to "accepted", and render a JSON response with a status of 204.</p>
<h2 id="v1passwordresetscontroller"><strong>V1::PasswordResetsController</strong></h2>
<p>The PasswordResetsController is a controller in the Api::V1 namespace. It is a subclass of Api::V1::BaseController and has skip_before_action :authenticate defined, meaning that it does not run the authenticate method before its actions.</p>
<p>The create action allows a user to request a password reset by providing their email address. If a user with the provided email is found, they will receive an email with password reset instructions. If no user is found, an error message is returned to the client.</p>
<p>The update action allows a user to reset their password by providing their email, a new password, and a reset token that was sent to them in the password reset email. If the provided token is valid and the user's password is successfully reset, the user's account is also unlocked if the unlockable? method returns true. If the reset fails, an error message is returned to the client.</p>
<p>The user_params method allows strong parameters for the email, password, password_confirmation, and token parameters.</p>
<p>The reset_params method combines the user params with the reset_password_token key set to the value of the token parameter.</p>
<p>The unlockable? method returns true if the @user object has the unlock_access! and unlock_strategy_enabled? methods defined and if the unlock_strategy_enabled? method returns true when passed the :email symbol. This allows the controller to determine if the user's account should be unlocked after a password reset.</p>
<h2 id="v1profilescontroller"><strong>V1::ProfilesController</strong></h2>
<p>The ProfilesController is a controller in the Api::V1 namespace.</p>
<p>The controller has three actions: share, revoke, and revoke_all.</p>
<p>The share action creates a new Share object and associates it with a branch and the current_user. It then calls the Profile::Share service to perform the share action. If the service is successful, it returns a status of 200, otherwise it returns a status of 422.</p>
<p>The revoke action finds a Share object using the params[:share_id] and then calls the Profile::Revoke service to perform the revoke action. If the service is successful, it returns a status of 200, otherwise it returns a status of 422.</p>
<p>The revoke_all action finds a member (presumably a User object) and then calls the Profile::RevokeAll service to perform the revoke all action. If the service is successful, it returns a status of 200, otherwise it returns a status of 422.</p>
<p>The controller has private methods for finding or initializing the new_share, share, and branch objects based on the request parameters.</p>
<p>The share and revoke actions have an authorize call to authorize the action for the appropriate object.</p>
<h2 id="v1qrcontroller"><strong>V1::QrController</strong></h2>
<p>The QrController is a controller in the Api::V1 namespace of the application.</p>
<p>This controller has a single action, index, which generates a QR code image and returns it as a base64 encoded string in the response.</p>
<p>The QR code contains the text "Vista ID" followed by the current user's member ID.</p>
<p>The QR code is generated using the RQRCode gem and the ChunkyPNG gem.</p>
<p>The index action does not interact with any models.</p>
<p>An error condition could occur if there is an issue with the RQRCode or ChunkyPNG gem while generating the QR code image.</p>
<p>An example of usage for this controller might be to make a GET request to /api/v1/qr to retrieve the base64 encoded QR code image for the current user's member ID.</p>
<h2 id="v1questionscontroller"><strong>V1::QuestionsController</strong></h2>
<p>The QuestionsController is a part of the V1 API and is a subclass of Api::V1::BaseController.</p>
<p>The controller has two actions: index and show. The index action is used to retrieve a list of questions, and the show action is used to retrieve a specific question.</p>
<p>The index action uses the has_scope method to apply a scope called intro to the list of questions. It also includes the answers and photos of the questions in the list. The list of questions is then rendered as JSON.</p>
<p>The show action first finds the specific question using the find_question private method and the params[:id] parameter. It then authorizes the question using the authorize method, and finally renders the question as JSON if it is stale.</p>
<p>The private find_question method is used to find a specific question using the params[:id] parameter.</p>
<h2 id="v1releasescontroller"><strong>V1::ReleasesController</strong></h2>
<p>The ReleasesController is a controller in the Api::V1 namespace.</p>
<p>The check action is responsible for retrieving the latest release timestamp from the database and rendering it as a JSON response.</p>
<p>The latest action retrieves the latest release from the database and renders the file contents as a JSON response. If no release is found, it returns an empty JSON object.</p>
<p>The ReleasesController does not interact with any models.</p>
<p>An error condition that could occur in the check action is if there is a problem connecting to the database or if there is a problem executing the query to retrieve the latest release timestamp. In the latest action, an error condition could occur if there is a problem connecting to the database or if there is a problem executing the query to retrieve the latest release.</p>
<p>Example usage of the check action: A client sends a GET request to /api/v1/releases/check and the server responds with a JSON object containing the latest release timestamp. Example usage of the latest action: A client sends a GET request to /api/v1/releases/latest and the server responds with a JSON object containing the contents of the latest release file.</p>
<h2 id="v1statuscontroller"><strong>V1::StatusController</strong></h2>
<p>The StatusController is an API controller that handles requests related to the status of the service.</p>
<p>Functions and routes handled:
This controller has a single function called ping, which is associated with the /status/ping route. This function simply responds with a message indicating that the service is available and a 200 status code.</p>
<p>Models interacted with:
This controller does not interact with any models.</p>
<p>Error conditions:
There are no error conditions specified in this controller.</p>
<p>Examples of usage:
An example usage of this controller would be to send a GET request to the /status/ping route, which would return a message indicating that the service is available. This could be used to verify that the service is running and responsive.</p>
<h2 id="v1synccontroller"><strong>V1::SyncController</strong></h2>
<p>The SyncController is a controller in the Api::V1 namespace and inherits from the Api::V1::BaseController.</p>
<p>The controller has two actions: index and create.</p>
<p>The index action returns a JSON object with a list of question ids and updated timestamps for all of the current user's answers.</p>
<p>The create action processes a request to synchronize the current user's answers with the server. The request can include new answers to add, existing answers to update, and existing answers to delete. The action performs these operations within a transaction to ensure that the synchronization is atomic. After the synchronization is completed, the action returns a JSON object with the updated answers for the specified questions.</p>
<p>The controller does not interact with any models directly. Instead, it uses the has-many association between the User model and the UserAnswer model to access the current user's answers.</p>
<p>There are no error conditions explicitly handled in this controller. If an error occurs during the synchronization process, such as a validation error when creating a new answer, it will raise an exception and the transaction will be rolled back.</p>
<p>Example usage:
An HTTP GET request to /api/v1/sync will return a JSON object with a list of the current user's answers.</p>
<p>An HTTP POST request to /api/v1/sync with a JSON body containing add, update, and delete arrays will synchronize the current user's answers with the server. The add array should contain objects representing new answers to create, the update array should contain objects representing existing answers to update, and the delete array should contain question ids for existing answers to delete.</p>
<h2 id="v1useranswerscontroller"><strong>V1::UserAnswersController</strong></h2>
<p>The UserAnswersController is part of the Api::V1 namespace and is a subclass of Api::V1::BaseController.</p>
<p>This controller has four actions: index, show, create, and update. The before_action callback find_answer is run before all actions except for index and create.</p>
<p>The index action retrieves all the answers for the current user and renders them as JSON.
The show action renders a single answer as JSON.</p>
<p>The create action creates a new answer with the provided parameters, wrapped in a transaction using the UserAnswer::Create service object. If the service is successful, the answer is rendered as JSON with a 201 status code. If it fails, the answer is rendered as JSON with a 422 status code.</p>
<p>The update action updates an existing answer with the provided parameters, wrapped in a transaction using the UserAnswer::Update service object. If the service is successful, the answer is rendered as JSON with a 200 status code. If it fails, the answer is rendered as JSON with a 422 status code.</p>
<p>The destroy action destroys an existing answer, wrapped in a transaction using the UserAnswer::Destroy service object. If the service is successful, a 204 status code is returned. If it fails, a 422 status code is returned.
The answer_params method is a private method that permits the question_id, note, and values parameters for use in the create and update actions.</p>
<p>The find_answer method is a private method that retrieves the answer with the question_id parameter specified in the request. It is used in the show, update, and destroy actions.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../admin/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Admin" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Admin
            </div>
          </div>
        </a>
      
      
        
        <a href="../partner/" class="md-footer__link md-footer__link--next" aria-label="Next: Partner" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Partner
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.sections", "toc.follow"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>